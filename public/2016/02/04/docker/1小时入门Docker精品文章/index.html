<!doctype html> <html class="theme-next use-motion"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"> <meta http-equiv="Cache-Control" content="no-transform"> <meta http-equiv="Cache-Control" content="no-siteapp"> <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"> <link href="//fonts.lug.ustc.edu.cn/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"> <link rel="stylesheet" type="text/css" href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0"> <link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.2"> <meta name="description" content="一米阳光下，一本书，一个人，思念昉~"> <meta name="keywords" content="docker,"> <link rel="alternate" href="/atom.xml" title="一点心怡 | 前端娃" type="application/atom+xml"> <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2"> <meta name="description" content="Docker是什么Docker是软件工业中的容器技术。Docker为容器引入了镜像，使得容器可以从预先定义好的模版（images）创建出来，并且Docker镜像还是分层的。 Docker经常被提起的特点： 轻量，体现在内存占用小，高密度  快速，毫秒启动  隔离，沙盒技术更像虚拟机   Docker技术的基础： namespace，容器隔离的基础，保证A容器看不到B容器. 6个名空间：User,M"> <meta property="og:type" content="article"> <meta property="og:title" content="1小时入门Docker精品文章"> <meta property="og:url" content="http://zanjs.com/2016/02/04/docker/1小时入门Docker精品文章/index.html"> <meta property="og:site_name" content="一点心怡 | 前端娃"> <meta property="og:description" content="Docker是什么Docker是软件工业中的容器技术。Docker为容器引入了镜像，使得容器可以从预先定义好的模版（images）创建出来，并且Docker镜像还是分层的。 Docker经常被提起的特点： 轻量，体现在内存占用小，高密度  快速，毫秒启动  隔离，沙盒技术更像虚拟机   Docker技术的基础： namespace，容器隔离的基础，保证A容器看不到B容器. 6个名空间：User,M"> <meta property="og:updated_time" content="2016-02-06T06:34:19.000Z"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="1小时入门Docker精品文章"> <meta name="twitter:description" content="Docker是什么Docker是软件工业中的容器技术。Docker为容器引入了镜像，使得容器可以从预先定义好的模版（images）创建出来，并且Docker镜像还是分层的。 Docker经常被提起的特点： 轻量，体现在内存占用小，高密度  快速，毫秒启动  隔离，沙盒技术更像虚拟机   Docker技术的基础： namespace，容器隔离的基础，保证A容器看不到B容器. 6个名空间：User,M"> <script type="text/javascript" id="hexo.configuration">var CONFIG={scheme:"",sidebar:"post"};</script><title> 1小时入门Docker精品文章 | 一点心怡 | 前端娃 </title> </head> <body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"> <!--[if lte IE 8]><div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div><![endif]--> <script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?f8dd2acc75c13f358fd7f6266a371012";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script><div class="container one-column page-post-detail"> <div class="headband"></div> <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"> <div class="header-inner"><div class="site-meta"> <div class="custom-logo-site-title"> <a href="/" class="brand" rel="start"> <span class="logo-line-before"><i></i></span>
<span class="site-title">一点心怡 | 前端娃</span>
<span class="logo-line-after"><i></i></span> </a> </div> <p class="site-subtitle">精于心, 简于形, 说前端, 一种新的写作方式</p> </div> <div class="site-nav-toggle"> <button> <span class="btn-bar"></span>
<span class="btn-bar"></span>
<span class="btn-bar"></span> </button> </div> <nav class="site-nav"> <ul id="menu" class="menu menu-left"> <li class="menu-item menu-item-home"> <a href="/" rel="section"> <i class="menu-item-icon fa fa-home fa-fw"></i> <br> 首页 </a> </li> <li class="menu-item menu-item-categories"> <a href="/categories" rel="section"> <i class="menu-item-icon fa fa-th fa-fw"></i> <br> 分类 </a> </li> <li class="menu-item menu-item-about"> <a href="/about" rel="section"> <i class="menu-item-icon fa fa-user fa-fw"></i> <br> 关于 </a> </li> <li class="menu-item menu-item-archives"> <a href="/archives" rel="section"> <i class="menu-item-icon fa fa-archive fa-fw"></i> <br> 归档 </a> </li> <li class="menu-item menu-item-tags"> <a href="/tags" rel="section"> <i class="menu-item-icon fa fa-tags fa-fw"></i> <br> 标签 </a> </li> <li class="menu-item menu-item-commonweal"> <a href="/404.html" rel="section"> <i class="menu-item-icon fa fa-heartbeat fa-fw"></i> <br> 公益404 </a> </li> <li class="menu-item menu-item-search"> <a href="#" class="st-search-show-outputs"> <i class="menu-item-icon fa fa-search icon-next-search"></i> <br> 搜索 </a> </li> </ul> <div class="site-search"> <script type="text/javascript">!function(t,e,n,s,c,a,i){t.SwiftypeObject=c,t[c]=t[c]||function(){(t[c].q=t[c].q||[]).push(arguments)},a=e.createElement(n),i=e.getElementsByTagName(n)[0],a.async=1,a.src=s,i.parentNode.insertBefore(a,i)}(window,document,"script","//s.swiftypecdn.com/install/v2/st.js","_st"),_st("install","var-RLWgXExJzG-yZ-yP","2.0.0");</script></div></nav></div></header><main id="main" class="main"> <div class="main-inner"> <div id="content" class="content"> <div id="posts" class="posts-expand"> <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"> <header class="post-header"> <h1 class="post-title" itemprop="name headline"> 1小时入门Docker精品文章 </h1> <div class="post-meta"> <span class="post-time"> 发表于
<time itemprop="dateCreated" datetime="2016-02-04T13:00:31+08:00" content="2016-02-04"> 2016-02-04 </time> </span>
<span class="post-category"> &nbsp; | &nbsp; 分类于
<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/docker/" itemprop="url" rel="index"> <span itemprop="name">docker</span> </a> </span> </span>
<span class="post-comments-count"> &nbsp; | &nbsp;
<a href="/2016/02/04/docker/1小时入门Docker精品文章/#comments" itemprop="discussionUrl"> <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/04/docker/1小时入门Docker精品文章/" itemprop="commentsCount"></span> </a> </span> </div> </header> <div class="post-body"> <span itemprop="articleBody"><p>Docker是什么<br>Docker是软件工业中的容器技术。Docker为容器引入了镜像，使得容器可以从预先定义好的模版（images）创建出来，并且Docker镜像还是分层的。</p> <h2 id="Docker经常被提起的特点：">Docker经常被提起的特点：</h2><ul> <li><p>轻量，体现在内存占用小，高密度</p> </li> <li><p>快速，毫秒启动</p> </li> <li><p>隔离，沙盒技术更像虚拟机</p> </li> </ul> <h3 id="Docker技术的基础：">Docker技术的基础：</h3><ul> <li><p>namespace，容器隔离的基础，保证A容器看不到B容器. 6个名空间：User,Mnt,Network,UTS,IPC,Pid</p> </li> <li><p>cgroups，容器资源统计和隔离。主要用到的cgroups子系统：cpu,blkio,device,freezer,memory</p> </li> <li><p>unionfs，典型：aufs/overlayfs，分层镜像实现的基础</p> </li> </ul> <h3 id="Docker组件：">Docker组件：</h3><ul> <li><p>docker Client客户端————&gt;向docker服务器进程发起请求，如:创建、停止、销毁容器等操作</p> </li> <li><p>docker Server服务器进程—–&gt;处理所有docker的请求，管理所有容器</p> </li> <li><p>docker Registry镜像仓库——&gt;镜像存放的中央仓库，可看作是存放二进制的scm</p> </li> </ul> <h3 id="Docker安装">Docker安装</h3><p>Docker的安装非常简单，支持目前所有主流操作系统，从Mac到Windows到各种Linux发行版</p> <p>具体参考： <a href="https://docs.docker.com/installation/" target="_blank" rel="external">docker安装</a></p> <h3 id="Docker常见命令">Docker常见命令</h3><p>容器相关操作</p> <ul> <li><p>docker create # 创建一个容器但是不启动它</p> </li> <li><p>docker run # 创建并启动一个容器</p> </li> <li><p>docker stop # 停止容器运行，发送信号SIGTERM</p> </li> <li><p>docker start # 启动一个停止状态的容器</p> </li> <li><p>docker restart # 重启一个容器</p> </li> <li><p>docker rm # 删除一个容器</p> </li> <li><p>docker kill # 发送信号给容器，默认SIGKILL</p> </li> <li><p>docker attach # 连接(进入)到一个正在运行的容器</p> </li> <li><p>docker wait # 阻塞到一个容器，直到容器停止运行</p> </li> </ul> <p>获取容器相关信息</p> <ul> <li><p>docker ps # 显示状态为运行（Up）的容器</p> </li> <li><p>docker ps -a # 显示所有容器,包括运行中（Up）的和退出的(Exited)</p> </li> <li><p>docker inspect # 深入容器内部获取容器所有信息</p> </li> <li><p>docker logs # 查看容器的日志(stdout/stderr)</p> </li> <li><p>docker events # 得到docker服务器的实时的事件</p> </li> <li><p>docker port # 显示容器的端口映射</p> </li> <li><p>docker top # 显示容器的进程信息</p> </li> <li><p>docker diff # 显示容器文件系统的前后变化</p> </li> </ul> <h3 id="导出容器">导出容器</h3><ul> <li><p>docker cp # 从容器里向外拷贝文件或目录</p> </li> <li><p>docker export # 将容器整个文件系统导出为一个tar包，不带layers、tag等信息</p> </li> </ul> <h3 id="执行">执行</h3><p>docker exec # 在容器里执行一个命令，可以执行bash进入交互式</p> <h3 id="镜像操作">镜像操作</h3><ul> <li><p>docker images # 显示本地所有的镜像列表</p> </li> <li><p>docker import # 从一个tar包创建一个镜像，往往和export结合使用</p> </li> <li><p>docker build # 使用Dockerfile创建镜像（推荐）</p> </li> <li><p>docker commit # 从容器创建镜像</p> </li> <li><p>docker rmi # 删除一个镜像</p> </li> <li><p>docker load # 从一个tar包创建一个镜像，和save配合使用</p> </li> <li><p>docker save # 将一个镜像保存为一个tar包，带layers和tag信息</p> </li> <li><p>docker history # 显示生成一个镜像的历史命令</p> </li> <li><p>docker tag # 为镜像起一个别名</p> </li> </ul> <h3 id="镜像仓库(registry)操作">镜像仓库(registry)操作</h3><ul> <li><p>docker login # 登录到一个registry</p> </li> <li><p>docker search # 从registry仓库搜索镜像</p> </li> <li><p>docker pull # 从仓库下载镜像到本地</p> </li> <li><p>docker push # 将一个镜像push到registry仓库中</p> </li> </ul> <h3 id="获取Container_IP地址（Container状态必须是Up）">获取Container IP地址（Container状态必须是Up）</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect id | grep IPAddress | cut -d &#39;&#34;&#39; -f 4</span><br></pre></td></tr></table></figure> <h3 id="获取端口映射">获取端口映射</h3><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">docker inspect -f '</span><span class="expression">&#123;&#123;<span class="variable">range</span> $<span class="variable">p</span>, $<span class="variable">conf</span> := <span class="variable">.NetworkSettings.Ports</span>&#125;&#125;</span><span class="xml"> </span><span class="expression">&#123;&#123;$<span class="variable">p</span>&#125;&#125;</span><span class="xml"> -&gt; </span><span class="expression">&#123;&#123;(<span class="variable">index</span> $<span class="variable">conf</span> 0)<span class="variable">.HostPort</span>&#125;&#125;</span><span class="xml"> </span><span class="expression">&#123;&#123;<span class="variable">end</span>&#125;&#125;</span><span class="xml">' id</span></span><br></pre></td></tr></table></figure> <h3 id="获取环境变量">获取环境变量</h3><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">exec</span> container_id <span class="keyword">env</span></span><br></pre></td></tr></table></figure> <h3 id="杀掉所有正在运行的容器">杀掉所有正在运行的容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">kill</span> $(docker ps -q)</span><br></pre></td></tr></table></figure> <h3 id="删除老的(一周前创建)容器">删除老的(一周前创建)容器</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">docker</span> ps -a | grep <span class="string">'weeks ago'</span> | awk <span class="string">'&#123;print <span class="variable">$1</span>&#125;'</span> | xargs docker rm</span><br></pre></td></tr></table></figure> <h3 id="删除已经停止的容器">删除已经停止的容器</h3><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm <span class="escape">`d</span>ocker ps -<span class="literal">a</span> -q`</span><br></pre></td></tr></table></figure> <h3 id="删除所有镜像，小心">删除所有镜像，小心</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi <span class="variable">$(</span>docker images -q)</span><br></pre></td></tr></table></figure> <h2 id="Dockerfile">Dockerfile</h2><p>Dockerfile是自动构建Docker镜像的配置文件。也是Docker区别于其他容器的重要特征，正是有了Dockerfile，Docker的自动化和可移植性才成为可能。</p> <p>不论是开发还是运维，学会编写Dockerfile几乎是必备的，这有助于你理解整个容器的运行。</p> <h3 id="FROM_,_从一个基础镜像构建新的镜像"><strong>FROM</strong> , 从一个基础镜像构建新的镜像</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">FROM</span> ubuntu</span><br></pre></td></tr></table></figure> <h3 id="MAINTAINER_,_维护者信息">MAINTAINER , 维护者信息</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">MAINTAINER</span> julian &lt;julaudme<span class="variable">@gmail</span>.com&gt;</span><br></pre></td></tr></table></figure> <h3 id="ENV_,_设置环境变量">ENV , 设置环境变量</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ENV TEST <span class="number">1</span></span><br></pre></td></tr></table></figure> <h3 id="RUN_,_非交互式运行shell命令">RUN , 非交互式运行shell命令</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">RUN</span> <span class="bash">apt-get -y update </span><br><span class="line"></span></span><br><span class="line"><span class="built_in">RUN</span> <span class="bash">apt-get -y install nginx</span></span><br></pre></td></tr></table></figure> <h3 id="ADD_,_将外部文件拷贝到镜像里,src可以为url">ADD , 将外部文件拷贝到镜像里,src可以为url</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ADD </span>http://zanjs.com/  /<span class="preprocessor">data</span>/zanjs.tgz</span><br></pre></td></tr></table></figure> <h3 id="WORKDIR_/path/to/workdir,_设置工作目录">WORKDIR /path/to/workdir, 设置工作目录</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">WORKDIR</span> <span class="bash">/var/www</span></span><br></pre></td></tr></table></figure> <h3 id="USER_,_设置用户ID">USER , 设置用户ID</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">USER</span> <span class="title">nginx</span></span><br></pre></td></tr></table></figure> <h3 id="VULUME_&lt;dir&gt;,_设置volume"><code>VULUME &lt;dir&gt;, 设置volume</code></h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">VOLUME</span> <span class="bash">[‘/data’]</span></span><br></pre></td></tr></table></figure> <h3 id="EXPOSE_,_暴露哪些端口">EXPOSE , 暴露哪些端口</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPOSE <span class="number">80</span> <span class="number">443</span></span><br></pre></td></tr></table></figure> <h3 id="ENTRYPOINT_[‘executable’,_‘param1’,’param2’]执行命令">ENTRYPOINT [‘executable’, ‘param1’,’param2’]执行命令</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ENTRYPOINT</span> <span class="bash">[<span class="string">"/usr/sbin/nginx"</span>]</span></span><br></pre></td></tr></table></figure> <h3 id="CMD_[“param1”,”param2”]">CMD [“param1”,”param2”]</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CMD</span> <span class="bash">[<span class="string">"start"</span>]</span></span><br></pre></td></tr></table></figure> <p>docker创建、启动container时执行的命令，如果设置了ENTRYPOINT，则CMD将作为参数</p> <h3 id="Dockerfile最佳实践">Dockerfile最佳实践</h3><ul> <li>尽量将一些常用不变的指令放到前面</li> <li>CMD和ENTRYPOINT尽量使用json数组方式</li> </ul> <h3 id="通过Dockerfile构建image">通过Dockerfile构建image</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">docker</span> <span class="keyword">build </span>csphere/nginx:<span class="number">1</span>.<span class="number">7</span> .</span><br></pre></td></tr></table></figure> <h3 id="镜像仓库Registry">镜像仓库Registry</h3><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">镜像从Dockerfile build生成后，需要将镜像推送(push)到镜像仓库。</span><br><span class="line">企业内部都需要构建一个私有docker <span class="keyword">registry</span>，这个<span class="keyword">registry</span>可以看作二进制的scm，CI/CD也需要围绕<span class="keyword">registry</span>进行。</span><br></pre></td></tr></table></figure> <h3 id="部署registry">部署registry</h3><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /<span class="keyword">registry</span></span><br><span class="line">docker run  -p <span class="number">80</span>:<span class="number">5000</span>  -e STORAGE_PATH=/<span class="keyword">registry</span>  -v /<span class="keyword">registry</span>:/<span class="keyword">registry</span>  <span class="keyword">registry</span>:<span class="number">2.0</span></span><br></pre></td></tr></table></figure> <h3 id="推送镜像保存到仓库">推送镜像保存到仓库</h3><blockquote> <p>假设192.168.1.2是registry仓库的地址</p> </blockquote> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker tag  csphere/nginx:<span class="number">1.7</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span>/csphere/nginx:<span class="number">1.7</span></span><br><span class="line">docker push <span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span>/csphere/nginx:<span class="number">1.7</span></span><br></pre></td></tr></table></figure> <h2 id="几个简单小例子">几个简单小例子</h2><h3 id="容器操作">容器操作</h3><ul> <li>创建并拉取busybox</li> </ul> <figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -it --name con01 busybox:latest</span></span><br><span class="line">/ <span class="comment"># ip addr    #容器里执行</span></span><br><span class="line"><span class="number">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="number">65536</span> qdisc noqueue state UNKNOWN group default </span><br><span class="line">link/loopback <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">inet <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>/<span class="number">8</span> scope host lo</span><br><span class="line">   valid_lft <span class="keyword">forever</span> preferred_lft <span class="keyword">forever</span></span><br><span class="line">Segmentation fault (core dumped)</span><br><span class="line">/ <span class="comment"># ping www.csphere.cn</span></span><br><span class="line">PING www.csphere.cn (<span class="number">117.121</span><span class="number">.26</span><span class="number">.243</span>): <span class="number">56</span> data <span class="keyword">bytes</span></span><br><span class="line"><span class="number">64</span> <span class="keyword">bytes</span> <span class="built_in">from</span> <span class="number">117.121</span><span class="number">.26</span><span class="number">.243</span>: seq=<span class="number">0</span> ttl=<span class="number">48</span> <span class="built_in">time</span>=<span class="number">3.139</span> ms</span><br><span class="line"><span class="number">64</span> <span class="keyword">bytes</span> <span class="built_in">from</span> <span class="number">117.121</span><span class="number">.26</span><span class="number">.243</span>: seq=<span class="number">1</span> ttl=<span class="number">48</span> <span class="built_in">time</span>=<span class="number">3.027</span> ms</span><br><span class="line">^C</span><br><span class="line"><span class="comment">--- www.csphere.cn ping statistics ---</span></span><br><span class="line"><span class="number">2</span> packets transmitted, <span class="number">2</span> packets received, <span class="number">0</span>% packet loss</span><br><span class="line"><span class="built_in">round</span>-trip <span class="built_in">min</span>/<span class="built_in">avg</span>/<span class="built_in">max</span> = <span class="number">3.027</span>/<span class="number">3.083</span>/<span class="number">3.139</span> ms</span><br><span class="line">exit    <span class="comment">#退出容器</span></span><br></pre></td></tr></table></figure> <ul> <li>创建测试容器</li> </ul> <figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name con03 csphere/test:0.1</span><br><span class="line">efc9bda4a2ff<span class="number">2f479b18</span>e0fc<span class="number">4698e42c47</span>c<span class="number">9583a24c93</span>f5ce<span class="number">6b28a828</span>a172709</span><br></pre></td></tr></table></figure> <ul> <li>登陆到con03中</li> </ul> <figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># docker exec -it con03 /bin/bash</span></span><br><span class="line">[root<span class="constant">@efc9bda4a2ff</span> /]<span class="preprocessor"># exit</span></span><br></pre></td></tr></table></figure> <ul> <li>停止con03</li> </ul> <figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title"># docker stop con03</span></span><br><span class="line">co<span class="label">n03</span></span><br></pre></td></tr></table></figure> <ul> <li>开启con03</li> </ul> <figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title"># docker start con03</span></span><br><span class="line">co<span class="label">n03</span></span><br></pre></td></tr></table></figure> <ul> <li>删除con03</li> </ul> <figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE                    COMMAND                CREATED             STATUS                      PORTS                                             NAMES</span><br><span class="line">efc9bda4a2ff        csphere/<span class="keyword">test</span>:0.1         "/usr/<span class="keyword">local</span>/bin/<span class="keyword">run</span>    4 minutes ago       Up 17 seconds                                                                 con03               </span><br><span class="line">99aa6ee25adc        busybox:latest           <span class="string">"/bin/sh"</span>              14 minutes ago      Exited (0) 12 minutes ago                                                     con02               </span><br><span class="line">831c93de9b9f        busybox:latest           <span class="string">"/bin/sh"</span>              2 hours ago         Up 27 minutes                                                                 con01</span><br><span class="line"># docker <span class="keyword">rm</span> con02     #容器停止的状态</span><br><span class="line"># docker <span class="keyword">rm</span> -f con03  #容器开启的状态</span><br></pre></td></tr></table></figure> <h2 id="镜像操作-1">镜像操作</h2><h3 id="从docker_hub官方镜像仓库拉取镜像">从docker hub官方镜像仓库拉取镜像</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker pull busybox:latest</span></span><br><span class="line">atest: Pulling <span class="keyword">from</span> busybox</span><br><span class="line">cf2616975b4a: Pull complete </span><br><span class="line"><span class="number">6</span>ce2e90b0bc7: Pull complete </span><br><span class="line"><span class="number">8</span>c2e06607696: Already exists </span><br><span class="line">busybox:latest: The image you are pulling has been verified. Important: image verification <span class="keyword">is</span> a tech preview feature <span class="keyword">and</span> should <span class="keyword">not</span> be relied <span class="function_start"><span class="keyword">on</span></span> <span class="keyword">to</span> provide security.</span><br><span class="line">Digest: sha256:<span class="number">38</span>a203e1986cf79639cfb9b2e1d6e773de84002feea2d4eb006b52004ee8502d</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> busybox:latest</span><br></pre></td></tr></table></figure> <h3 id="从本地上传镜像到镜像仓库">从本地上传镜像到镜像仓库</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ker push <span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span>/csphere/nginx:<span class="number">1.7</span></span><br></pre></td></tr></table></figure> <h3 id="查找镜像仓库的某个镜像">查找镜像仓库的某个镜像</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker search centos/nginx</span></span><br><span class="line"><span class="keyword">NAME</span>                                     DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line"><span class="keyword">johnnyzheng</span>/centos-nginx-php-wordpress                                                   1                   <span class="sqbracket"> [OK]</span></span><br><span class="line"><span class="keyword">sergeyzh</span>/centos6-nginx                                                                   1                   <span class="sqbracket"> [OK]</span></span><br><span class="line"><span class="keyword">hzhang</span>/centos-nginx                                                                      1                   <span class="sqbracket"> [OK]</span></span><br></pre></td></tr></table></figure> <h3 id="查看本地镜像列表">查看本地镜像列表</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># docker images</span></span><br><span class="line">TAG                 IMAGE ID            CREATED             VIRTUAL SIZE</span><br><span class="line">docker.io/csphere/csphere   <span class="number">0.10</span><span class="number">.3</span>              <span class="number">604</span>c03bf0c9e        <span class="number">3</span> days ago          <span class="number">62.72</span> MB</span><br><span class="line">docker.io/csphere/csphere   latest              <span class="number">604</span>c03bf0c9e        <span class="number">3</span> days ago          <span class="number">62.72</span> MB</span><br><span class="line">csphere/csphere             <span class="number">0.10</span><span class="number">.3</span>              <span class="number">604</span>c03bf0c9e        <span class="number">3</span> days ago          <span class="number">62.72</span> MB</span><br><span class="line">registry                    <span class="number">2.0</span>                 <span class="number">2971</span>b6ce766c        <span class="number">7</span> days ago          <span class="number">548.1</span> MB</span><br><span class="line">busybox                     latest              <span class="number">8</span>c2e06607696        <span class="number">3</span> weeks ago         <span class="number">2.43</span> MB</span><br></pre></td></tr></table></figure> <h3 id="删除镜像">删除镜像</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rmi busybox:latest        #没有容器使用此镜像创建，如果有容器在使用此镜像会报错：Error response from daemon: Conflict, cannot <span class="operator"><span class="keyword">delete</span> <span class="number">8</span>c2e06607696 because the running <span class="keyword">container</span> <span class="number">831</span>c93de9b9f <span class="keyword">is</span> <span class="keyword">using</span> it, <span class="keyword">stop</span> it <span class="keyword">and</span> <span class="keyword">use</span> -<span class="keyword">f</span> <span class="keyword">to</span> <span class="keyword">force</span></span><br><span class="line">FATA[<span class="number">0000</span>] <span class="keyword">Error</span>: <span class="keyword">failed</span> <span class="keyword">to</span> remove one <span class="keyword">or</span> more images</span><br><span class="line">docker rmi -<span class="keyword">f</span> busybox:latest     #容器使用此镜像创建，此容器状态为Exited</span></span><br></pre></td></tr></table></figure> <h3 id="查看构建镜像所用过的命令">查看构建镜像所用过的命令</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># docker history busybox:latest</span></span><br><span class="line">IMAGE               CREATED             CREATED BY                                      SIZE</span><br><span class="line"><span class="number">8</span>c2e06607696        <span class="number">3</span> weeks ago         /bin/sh -c <span class="preprocessor">#(nop) CMD [<span class="string">"/bin/sh"</span>]               <span class="number">0</span> B</span></span><br><span class="line"><span class="number">6</span>ce2e90b0bc7        <span class="number">3</span> weeks ago         /bin/sh -c <span class="preprocessor">#(nop) ADD file:<span class="number">8</span>cf517d90fe79547c4   <span class="number">2.43</span> MB</span></span><br><span class="line">cf2616975b4a        <span class="number">3</span> weeks ago         /bin/sh -c <span class="preprocessor">#(nop) MAINTAINER Jérôme Petazzo     <span class="number">0</span> B</span></span><br></pre></td></tr></table></figure></span> </div> <footer class="post-footer"> <div class="post-tags"> <a href="/tags/docker/" rel="tag">#docker</a> </div> <div class="post-nav"> <div class="post-nav-next post-nav-item"> <a href="/2016/01/31/mongodb/ubuntu-mongodb-卸载/" rel="next" title="ubuntu mongodb 卸载"> <i class="fa fa-chevron-left"></i> ubuntu mongodb 卸载 </a> </div> <div class="post-nav-prev post-nav-item"> </div> </div> </footer> </article> <div class="post-spread"> <div class="ds-share flat" data-thread-key="2016/02/04/docker/1小时入门Docker精品文章/" data-title="1小时入门Docker精品文章" data-content="" data-url="http://zanjs.com/2016/02/04/docker/1小时入门Docker精品文章/"> <div class="ds-share-inline"> <ul class="ds-share-icons-16"> <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li> <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li> <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li> <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li> <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li> </ul> <div class="ds-share-icons-more"> </div> </div> </div> </div> </div> </div> <div class="comments" id="comments"> <div class="ds-thread" data-thread-key="2016/02/04/docker/1小时入门Docker精品文章/" data-title="1小时入门Docker精品文章" data-url="http://zanjs.com/2016/02/04/docker/1小时入门Docker精品文章/"> </div> </div> </div> <div class="sidebar-toggle"> <div class="sidebar-toggle-line-wrap"> <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
<span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
<span class="sidebar-toggle-line sidebar-toggle-line-last"></span> </div> </div> <aside id="sidebar" class="sidebar"> <div class="sidebar-inner"> <ul class="sidebar-nav motion-element"> <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录 </li> <li class="sidebar-nav-overview" data-target="site-overview"> 站点概览 </li> </ul> <section class="site-overview sidebar-panel"> <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" src="https://avatars2.githubusercontent.com/u/12947276?v=3&s=460" alt="Julaud" itemprop="image"> <p class="site-author-name" itemprop="name">Julaud</p> </div> <p class="site-description motion-element" itemprop="description">一米阳光下，一本书，一个人，思念昉~</p> <nav class="site-state motion-element"> <div class="site-state-item site-state-posts"> <a href="/archives"> <span class="site-state-item-count">14</span>
<span class="site-state-item-name">日志</span> </a> </div> <div class="site-state-item site-state-categories"> <a href="/categories"> <span class="site-state-item-count">8</span>
<span class="site-state-item-name">分类</span> </a> </div> <div class="site-state-item site-state-tags"> <a href="/tags"> <span class="site-state-item-count">27</span>
<span class="site-state-item-name">标签</span> </a> </div> </nav> <div class="feed-link motion-element"> <a href="/atom.xml" rel="alternate"> <i class="menu-item-icon icon-next-feed"></i>
RSS </a> </div> <div class="links-of-author motion-element"> <span class="links-of-author-item"> <a href="https://github.com/zanjs" target="_blank"> <i class="fa fa-github fa-fw"></i> github </a> </span>
<span class="links-of-author-item"> <a href="https://twitter.com/zanjs" target="_blank"> <i class="fa fa-twitter fa-fw"></i> twitter </a> </span>
<span class="links-of-author-item"> <a href="http://weibo.com/5315557778" target="_blank"> <i class="fa fa-weibo fa-fw"></i> weibo </a> </span> </div> <div class="links-of-author motion-element"> </div> </section> <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"> <div class="post-toc-indicator-top post-toc-indicator"></div> <div class="post-toc"> <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker经常被提起的特点："><span class="nav-number">1.</span> <span class="nav-text">Docker经常被提起的特点：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker技术的基础："><span class="nav-number">1.1.</span> <span class="nav-text">Docker技术的基础：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker组件："><span class="nav-number">1.2.</span> <span class="nav-text">Docker组件：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker安装"><span class="nav-number">1.3.</span> <span class="nav-text">Docker安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker常见命令"><span class="nav-number">1.4.</span> <span class="nav-text">Docker常见命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#导出容器"><span class="nav-number">1.5.</span> <span class="nav-text">导出容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#执行"><span class="nav-number">1.6.</span> <span class="nav-text">执行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#镜像操作"><span class="nav-number">1.7.</span> <span class="nav-text">镜像操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#镜像仓库(registry)操作"><span class="nav-number">1.8.</span> <span class="nav-text">镜像仓库(registry)操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取Container_IP地址（Container状态必须是Up）"><span class="nav-number">1.9.</span> <span class="nav-text">获取Container IP地址（Container状态必须是Up）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取端口映射"><span class="nav-number">1.10.</span> <span class="nav-text">获取端口映射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取环境变量"><span class="nav-number">1.11.</span> <span class="nav-text">获取环境变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#杀掉所有正在运行的容器"><span class="nav-number">1.12.</span> <span class="nav-text">杀掉所有正在运行的容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除老的(一周前创建)容器"><span class="nav-number">1.13.</span> <span class="nav-text">删除老的(一周前创建)容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除已经停止的容器"><span class="nav-number">1.14.</span> <span class="nav-text">删除已经停止的容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除所有镜像，小心"><span class="nav-number">1.15.</span> <span class="nav-text">删除所有镜像，小心</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dockerfile"><span class="nav-number">2.</span> <span class="nav-text">Dockerfile</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#FROM_,_从一个基础镜像构建新的镜像"><span class="nav-number">2.1.</span> <span class="nav-text">FROM , 从一个基础镜像构建新的镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MAINTAINER_,_维护者信息"><span class="nav-number">2.2.</span> <span class="nav-text">MAINTAINER , 维护者信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ENV_,_设置环境变量"><span class="nav-number">2.3.</span> <span class="nav-text">ENV , 设置环境变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RUN_,_非交互式运行shell命令"><span class="nav-number">2.4.</span> <span class="nav-text">RUN , 非交互式运行shell命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ADD_,_将外部文件拷贝到镜像里,src可以为url"><span class="nav-number">2.5.</span> <span class="nav-text">ADD , 将外部文件拷贝到镜像里,src可以为url</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WORKDIR_/path/to/workdir,_设置工作目录"><span class="nav-number">2.6.</span> <span class="nav-text">WORKDIR /path/to/workdir, 设置工作目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#USER_,_设置用户ID"><span class="nav-number">2.7.</span> <span class="nav-text">USER , 设置用户ID</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VULUME_<dir>,_设置volume"><span class="nav-number">2.8.</span> <span class="nav-text">VULUME <dir>, 设置volume</dir></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EXPOSE_,_暴露哪些端口"><span class="nav-number">2.9.</span> <span class="nav-text">EXPOSE , 暴露哪些端口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ENTRYPOINT_[‘executable’,_‘param1’,’param2’]执行命令"><span class="nav-number">2.10.</span> <span class="nav-text">ENTRYPOINT [‘executable’, ‘param1’,’param2’]执行命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CMD_[“param1”,”param2”]"><span class="nav-number">2.11.</span> <span class="nav-text">CMD [“param1”,”param2”]</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dockerfile最佳实践"><span class="nav-number">2.12.</span> <span class="nav-text">Dockerfile最佳实践</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#通过Dockerfile构建image"><span class="nav-number">2.13.</span> <span class="nav-text">通过Dockerfile构建image</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#镜像仓库Registry"><span class="nav-number">2.14.</span> <span class="nav-text">镜像仓库Registry</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#部署registry"><span class="nav-number">2.15.</span> <span class="nav-text">部署registry</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#推送镜像保存到仓库"><span class="nav-number">2.16.</span> <span class="nav-text">推送镜像保存到仓库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#几个简单小例子"><span class="nav-number">3.</span> <span class="nav-text">几个简单小例子</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#容器操作"><span class="nav-number">3.1.</span> <span class="nav-text">容器操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#镜像操作-1"><span class="nav-number">4.</span> <span class="nav-text">镜像操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#从docker_hub官方镜像仓库拉取镜像"><span class="nav-number">4.1.</span> <span class="nav-text">从docker hub官方镜像仓库拉取镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#从本地上传镜像到镜像仓库"><span class="nav-number">4.2.</span> <span class="nav-text">从本地上传镜像到镜像仓库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查找镜像仓库的某个镜像"><span class="nav-number">4.3.</span> <span class="nav-text">查找镜像仓库的某个镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看本地镜像列表"><span class="nav-number">4.4.</span> <span class="nav-text">查看本地镜像列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除镜像"><span class="nav-number">4.5.</span> <span class="nav-text">删除镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看构建镜像所用过的命令"><span class="nav-number">4.6.</span> <span class="nav-text">查看构建镜像所用过的命令</span></a></li></ol></li></ol></div> </div> <div class="post-toc-indicator-bottom post-toc-indicator"></div> </section> </div> </aside> </main> <footer id="footer" class="footer"> <div class="footer-inner"> <div class="copyright"> &copy; 2015 -
<span itemprop="copyrightYear">2016</span>
<span class="with-love"> <i class="icon-next-heart fa fa-heart"></i> </span>
<span class="author" itemprop="copyrightHolder">Julaud</span> </div> </div> </footer> <div class="back-to-top"></div> </div> <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script><script type="text/javascript">var duoshuoQuery={short_name:"zanjs-com"};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.id="duoshuo-script",t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}();</script><script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script><script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script><script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script><script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script><script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script><script type="text/javascript" src="/js/motion_global.js?v=0.4.5.2" id="motion.global"></script><script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.2"></script><script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.2" id="bootstrap.scrollspy.custom"></script><script type="text/javascript" id="sidebar.toc.highlight">$(document).ready(function(){function o(){$(s+" "+r).removeClass(r.substring(1))}function t(){i(),n()}function i(){var o=$(".sidebar").height()-a.position().top-$(".post-toc-indicator-bottom").height();return a.css("height",o),o}function n(){c(".post-toc-indicator-top",a.scrollTop()>0?"show":"hide"),c(".post-toc-indicator-bottom",a.scrollTop()>=a.find("ol").height()-a.height()?"hide":"show")}function e(o){o.on("mousewheel DOMMouseScroll",function(o){var t=o.originalEvent,i=t.wheelDelta||-t.detail;this.scrollTop+=30*(0>i?1:-1),o.preventDefault(),n()})}function c(o,t){var i=$(o),n="show"===t?.4:0;i.velocity?i.velocity("stop").velocity({opacity:n},{duration:100}):i.stop().animate({opacity:n},100)}var s=".post-toc",a=$(s),r=".active-current";a.on("activate.bs.scrollspy",function(){var t=$(s+" .active").last();o(),t.addClass("active-current"),a[0].scrollTop=t.position().top}).on("clear.bs.scrollspy",function(){o()}),$(document).on("sidebar.motion.complete",function(){t()}),$("body").scrollspy({target:s}),$(window).on("resize",function(){$(".sidebar").hasClass("sidebar-active")&&t()}),e(a)});</script><script type="text/javascript" id="sidebar.nav">$(document).ready(function(){var t=$("html"),i=200,a=$.isFunction(t.velocity);$(".sidebar-nav li").on("click",function(){var t=$(this),o="sidebar-nav-active",e="sidebar-panel-active";if(!t.hasClass(o)){var s=$("."+e),n=$("."+t.data("target"));a?s.velocity("transition.slideUpOut",i,function(){n.velocity("stop").velocity("transition.slideDownIn",i).addClass(e)}):s.animate({opacity:0},i,function(){s.hide(),n.stop().css({opacity:0,display:"block"}).animate({opacity:1},i,function(){s.removeClass(e),n.addClass(e)})}),t.siblings().removeClass(o),t.addClass(o)}}),$(".post-toc a").on("click",function(i){i.preventDefault();var o=escapeSelector(this.getAttribute("href")),e=$(o).offset().top;a?t.velocity("stop").velocity("scroll",{offset:e+"px",mobileHA:!1}):$("html, body").stop().animate({scrollTop:e},500)}),motionMiddleWares.sidebar=function(){var t=$(".post-toc-content");"post"===CONFIG.sidebar&&t.length>0&&t.html().trim().length>0&&displaySidebar()}});</script><script type="text/javascript">$(document).ready(function(){isMobile()&&FastClick.attach(document.body),motionIntegrator.add(motionMiddleWares.logo).add(motionMiddleWares.menu).add(motionMiddleWares.backToTop).add(motionMiddleWares.postList).add(motionMiddleWares.sidebar),motionIntegrator.bootstrap()});</script><script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],processEscapes:!0,skipTags:["script","noscript","style","textarea","pre","code"]}});</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function(){var a,e=MathJax.Hub.getAllJax();for(a=0;a<e.length;a+=1)e[a].SourceElement().parentNode.className+=" has-jax"});</script><script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script><script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script><script type="text/javascript" src="/js/lazyload.js"></script><script type="text/javascript">$(function(){$("#posts").find("img").lazyload({placeholder:"/images/loading.gif",effect:"fadeIn"})});</script></body></html>