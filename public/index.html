<!doctype html> <html class="theme-next use-motion"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"> <meta http-equiv="Cache-Control" content="no-transform"> <meta http-equiv="Cache-Control" content="no-siteapp"> <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"> <link href="//fonts.lug.ustc.edu.cn/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"> <link rel="stylesheet" type="text/css" href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0"> <link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.2"> <meta name="description" content="一米阳光下，一本书，一个人，思念昉~"> <meta name="keywords" content="zanjs, 赞生博客"> <link rel="alternate" href="/atom.xml" title="一点心怡 | 前端娃" type="application/atom+xml"> <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2"> <meta name="description" content="一米阳光下，一本书，一个人，思念昉~"> <meta property="og:type" content="website"> <meta property="og:title" content="一点心怡 | 前端娃"> <meta property="og:url" content="http://zanjs.com/index.html"> <meta property="og:site_name" content="一点心怡 | 前端娃"> <meta property="og:description" content="一米阳光下，一本书，一个人，思念昉~"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="一点心怡 | 前端娃"> <meta name="twitter:description" content="一米阳光下，一本书，一个人，思念昉~"> <script type="text/javascript" id="hexo.configuration">var CONFIG={scheme:"",sidebar:"post"};</script><title> 一点心怡 | 前端娃 </title> </head> <body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"> <!--[if lte IE 8]><div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div><![endif]--> <script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?f8dd2acc75c13f358fd7f6266a371012";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script><div class="container one-column page-home"> <div class="headband"></div> <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"> <div class="header-inner"><div class="site-meta"> <div class="custom-logo-site-title"> <a href="/" class="brand" rel="start"> <span class="logo-line-before"><i></i></span>
<span class="site-title">一点心怡 | 前端娃</span>
<span class="logo-line-after"><i></i></span> </a> </div> <p class="site-subtitle">精于心, 简于形, 说前端, 一种新的写作方式</p> </div> <div class="site-nav-toggle"> <button> <span class="btn-bar"></span>
<span class="btn-bar"></span>
<span class="btn-bar"></span> </button> </div> <nav class="site-nav"> <ul id="menu" class="menu menu-left"> <li class="menu-item menu-item-home"> <a href="/" rel="section"> <i class="menu-item-icon fa fa-home fa-fw"></i> <br> 首页 </a> </li> <li class="menu-item menu-item-categories"> <a href="/categories" rel="section"> <i class="menu-item-icon fa fa-th fa-fw"></i> <br> 分类 </a> </li> <li class="menu-item menu-item-about"> <a href="/about" rel="section"> <i class="menu-item-icon fa fa-user fa-fw"></i> <br> 关于 </a> </li> <li class="menu-item menu-item-archives"> <a href="/archives" rel="section"> <i class="menu-item-icon fa fa-archive fa-fw"></i> <br> 归档 </a> </li> <li class="menu-item menu-item-tags"> <a href="/tags" rel="section"> <i class="menu-item-icon fa fa-tags fa-fw"></i> <br> 标签 </a> </li> <li class="menu-item menu-item-commonweal"> <a href="/404.html" rel="section"> <i class="menu-item-icon fa fa-heartbeat fa-fw"></i> <br> 公益404 </a> </li> <li class="menu-item menu-item-search"> <a href="#" class="st-search-show-outputs"> <i class="menu-item-icon fa fa-search icon-next-search"></i> <br> 搜索 </a> </li> </ul> <div class="site-search"> <script type="text/javascript">!function(t,e,n,s,c,a,i){t.SwiftypeObject=c,t[c]=t[c]||function(){(t[c].q=t[c].q||[]).push(arguments)},a=e.createElement(n),i=e.getElementsByTagName(n)[0],a.async=1,a.src=s,i.parentNode.insertBefore(a,i)}(window,document,"script","//s.swiftypecdn.com/install/v2/st.js","_st"),_st("install","var-RLWgXExJzG-yZ-yP","2.0.0");</script></div></nav></div></header><main id="main" class="main"> <div class="main-inner"> <div id="content" class="content"> <section id="posts" class="posts-expand"> <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"> <header class="post-header"> <h1 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/2016/01/31/mongodb/ubuntu-mongodb-卸载/" itemprop="url"> ubuntu mongodb 卸载 </a> </h1> <div class="post-meta"> <span class="post-time"> 发表于
<time itemprop="dateCreated" datetime="2016-01-31T11:44:47+08:00" content="2016-01-31"> 2016-01-31 </time> </span>
<span class="post-category"> &nbsp; | &nbsp; 分类于
<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/数据库/" itemprop="url" rel="index"> <span itemprop="name">数据库</span> </a> </span>
，[{htmlmin-lb}]<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/数据库/mongodb/" itemprop="url" rel="index"> <span itemprop="name">mongodb</span> </a> </span> </span>
<span class="post-comments-count"> &nbsp; | &nbsp;
<a href="/2016/01/31/mongodb/ubuntu-mongodb-卸载/#comments" itemprop="discussionUrl"> <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/31/mongodb/ubuntu-mongodb-卸载/" itemprop="commentsCount"></span> </a> </span> </div> </header> <div class="post-body"> <span itemprop="articleBody"> <h2 id="卸载">卸载</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get remove mongodb</span><br></pre></td></tr></table></figure> <h3 id="彻底删除">彻底删除</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> autoremove</span><br><span class="line">sudo apt-<span class="built_in">get</span> autoclean</span><br><span class="line"></span><br><span class="line">dpkg -<span class="keyword">l</span> |<span class="keyword">grep</span> ^rc|awk <span class="string">'&#123;print $2&#125;'</span> |<span class="built_in">tr</span> [<span class="string">"\n"</span>] [<span class="string">" "</span>]|sudo xargs dpkg -<span class="keyword">P</span> -</span><br></pre></td></tr></table></figure> </span> </div> <footer class="post-footer"> <div class="post-eof"></div> </footer> </article> <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"> <header class="post-header"> <h1 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/2016/01/23/javascript/Lo-Dash？引入惰性计算/" itemprop="url"> Lo-Dash？引入惰性计算 </a> </h1> <div class="post-meta"> <span class="post-time"> 发表于
<time itemprop="dateCreated" datetime="2016-01-23T17:36:42+08:00" content="2016-01-23"> 2016-01-23 </time> </span>
<span class="post-category"> &nbsp; | &nbsp; 分类于
<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/javascript/" itemprop="url" rel="index"> <span itemprop="name">javascript</span> </a> </span> </span>
<span class="post-comments-count"> &nbsp; | &nbsp;
<a href="/2016/01/23/javascript/Lo-Dash？引入惰性计算/#comments" itemprop="discussionUrl"> <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/23/javascript/Lo-Dash？引入惰性计算/" itemprop="commentsCount"></span> </a> </span> </div> </header> <div class="post-body"> <span itemprop="articleBody"> <p>我一直以为像 Lo-Dash 这样的库已经不能再快了，毕竟它们已经足够快了。<br> Lo-Dash 几乎完全混合了各种 JavaScript 奇技淫巧（YouTube）来压榨出最好的性能。</p> <h2 id="惰性计算">惰性计算</h2><p> 但似乎我错了 - 其实 Lo-Dash 可以运行的更快。<br> 你需要做的是，停止思考那些细微的优化，并开始找出更加适用的算法。<br> 例如，在一个典型的循环中，我们往往倾向于去优化单次迭代的时间</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> len = getLength();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    operation(); <span class="comment">// &lt;- 10毫秒 - 如何优化到9毫秒?!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>代码说明：取得数组的长度，然后重复执行 N 遍 operation() 函数。译注 by @justjavac</p> <p>但是，这（优化 operation() 执行时间）往往很难，而且对性能提升也非常有限。</p> <p> 相反，在某些情况下，我们可以优化 getLength() 函数。 它返回的数字越小，则每个 10 毫秒循环的执行次数就越少。</p> <p>这就是 Lo-Dash 使用惰性计算的思想。 这是减少周期数，而不是减少每个周期的执行时间。 让我们看看下面的例子：</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">priceLt</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123; <span class="keyword">return</span> item.price &lt; x; &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> gems = [</span><br><span class="line">   &#123; name: <span class="string">'Sunstone'</span>, price: <span class="number">4</span>  &#125;,</span><br><span class="line">   &#123; name: <span class="string">'Amethyst'</span>, price: <span class="number">15</span> &#125;,</span><br><span class="line">   &#123; name: <span class="string">'Prehnite'</span>, price: <span class="number">20</span> &#125;,</span><br><span class="line">   &#123; name: <span class="string">'Sugilite'</span>, price: <span class="number">7</span>  &#125;,</span><br><span class="line">   &#123; name: <span class="string">'Diopside'</span>, price: <span class="number">3</span>  &#125;, </span><br><span class="line">   &#123; name: <span class="string">'Feldspar'</span>, price: <span class="number">13</span> &#125;,</span><br><span class="line">   &#123; name: <span class="string">'Dioptase'</span>, price: <span class="number">2</span>  &#125;, </span><br><span class="line">   &#123; name: <span class="string">'Sapphire'</span>, price: <span class="number">20</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> chosen = _(gems).filter(priceLt(<span class="number">10</span>)).take(<span class="number">3</span>).value();</span><br></pre></td></tr></table></figure> <p>代码说明：gems 保存了 8 个对象，名字和价格。priceLt(x) 函数返回价格低于 x 的所有元素。译注 by @justjavac</p> <p>我们把价格低于 10 美元的前 3 个 gems 找出来。 常规 Lo-Dash 方法（严格计算）是过滤所有 8 个 gems，然后返回过滤结果的前 3 个。</p> <p><img src="http://justjavac.com/assets/images/lodash-naive.gif" alt=""></p> <p>不难看出来，这种算法是不明智的。 它处理了所有的 8 个元素，而实际上我们只需要读取其中的 5 个元素就能得到我们想要的结果。<br> 与此相反，使用惰性计算算法，只需要处理能得到结果的最少数量就可以了。 如图所示：</p> <p> <img src="http://justjavac.com/assets/images/grafika.gif" alt=""></p> <p> 我们轻而易举就获得了 37.5％ 的性能提升。<br> 但是这还不是全部，其实很容易找到能获得 1000 倍以上性能提升的例子。 让我们一起来看看：</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 99,999 张照片</span></span><br><span class="line"><span class="keyword">var</span> phoneNumbers = [<span class="number">5554445555</span>, <span class="number">1424445656</span>, <span class="number">5554443333</span>, … ×<span class="number">99</span>,<span class="number">999</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回包含 "55" 的照片</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">contains55</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str.contains(<span class="string">"55"</span>); </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取 100 张包含 "55" 的照片</span></span><br><span class="line"><span class="keyword">var</span> r = _(phoneNumbers).map(<span class="built_in">String</span>).filter(contains55).take(<span class="number">100</span>);</span><br></pre></td></tr></table></figure> </span> </div> <footer class="post-footer"> <div class="post-eof"></div> </footer> </article> <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"> <header class="post-header"> <h1 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/2016/01/10/javascript/JavaScript-数组常用方法介绍/" itemprop="url"> JavaScript 数组常用方法介绍 </a> </h1> <div class="post-meta"> <span class="post-time"> 发表于
<time itemprop="dateCreated" datetime="2016-01-10T19:59:09+08:00" content="2016-01-10"> 2016-01-10 </time> </span>
<span class="post-category"> &nbsp; | &nbsp; 分类于
<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/javascript/" itemprop="url" rel="index"> <span itemprop="name">javascript</span> </a> </span> </span>
<span class="post-comments-count"> &nbsp; | &nbsp;
<a href="/2016/01/10/javascript/JavaScript-数组常用方法介绍/#comments" itemprop="discussionUrl"> <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/10/javascript/JavaScript-数组常用方法介绍/" itemprop="commentsCount"></span> </a> </span> </div> </header> <div class="post-body"> <span itemprop="articleBody"> <h2 id="修改数组">修改数组</h2><ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/pop" target="_blank" rel="external">array.pop</a> - 删除数组最后一位元素。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.pop();<span class="comment">// 返回 3</span></span><br><span class="line">arr;<span class="comment">// [1,2]</span></span><br></pre></td></tr></table></figure> <ul> <li>array.shift - 删除数组第一位元素。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.shift();<span class="comment">// 返回 1</span></span><br><span class="line">arr;<span class="comment">// [2,3]</span></span><br></pre></td></tr></table></figure> <ul> <li>array.push - 往数组的末尾新增一个或多个元素。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line">arr.push(<span class="number">1</span>);<span class="comment">// 返回数组长度 1</span></span><br><span class="line">arr;<span class="comment">// [1]</span></span><br><span class="line">arr.push(<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">arr;<span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure> <ul> <li>array.unshift - 往数组的开头新增一个或多个元素。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.unshift(<span class="number">0</span>);</span><br><span class="line">arr.unshift(-<span class="number">1</span>, -<span class="number">2</span>);</span><br><span class="line">arr;<span class="comment">// [-1, -2, 0, 1, 2]</span></span><br></pre></td></tr></table></figure> <ul> <li>array.reverse - 把数组元素顺序逆转。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.reverse();<span class="comment">// [3, 2, 1]</span></span><br><span class="line">arr;<span class="comment">// [3, 2, 1]</span></span><br></pre></td></tr></table></figure> <ul> <li>array.sort - 数组排序。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span> ,-<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">arr.sort();<span class="comment">// [-1, 1, 2]</span></span><br><span class="line">arr;<span class="comment">// [-1, 1, 2]</span></span><br><span class="line">arr = [&#123;</span><br><span class="line">  age: <span class="number">10</span>,</span><br><span class="line">&#125;,&#123;</span><br><span class="line">  age: <span class="number">1</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">  age: <span class="number">12</span></span><br><span class="line">&#125;];</span><br><span class="line"><span class="comment">// 按照 age 从小到大排序</span></span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a.age - b.age &gt; <span class="number">0</span> ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <ul> <li>array.splice - 给数组添加或者删除元素。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// splice(开始下标, 删除个数，插入元素(可以多个)）</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">arr.splice(<span class="number">1</span>, <span class="number">2</span>);<span class="comment">// [2,3]</span></span><br><span class="line">arr;<span class="comment">// [1,4]</span></span><br><span class="line">arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">arr.splice(<span class="number">1</span>, <span class="number">2</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>);<span class="comment">// [2,3]</span></span><br><span class="line">arr;<span class="comment">// [1, "a", "b", "c", 4]</span></span><br></pre></td></tr></table></figure> <blockquote> <p>注意：当数组执行上面的这些方法时，都会修改原数组。</p> </blockquote> <h2 id="迭代方法">迭代方法</h2><ul> <li>array.forEach - 遍历数组。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'a'</span> ,<span class="string">'b'</span> ,<span class="string">'c'</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">each, index</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(each,index);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 输出 'a' 0  'b' 1 'c' 2</span></span><br></pre></td></tr></table></figure> <ul> <li>array.filter - 从数组中找出所有符合指定条件的元素。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 找出所有正数</span></span><br><span class="line"><span class="keyword">var</span> res = [<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>].filter(<span class="function"><span class="keyword">function</span>(<span class="params">each</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> each &gt; <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line">res; <span class="comment">//[3,4]</span></span><br></pre></td></tr></table></figure> <ul> <li>array.every - 数组中是否每个元素都满足指定的条件。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 是否都为正数</span></span><br><span class="line"><span class="keyword">var</span> isAllPositive = [<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>].every(<span class="function"><span class="keyword">function</span>(<span class="params">each</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> each &gt; <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line">isAllPositive; <span class="comment">// false;</span></span><br><span class="line">isAllPositive = [<span class="number">3</span>, <span class="number">4</span>].every(<span class="function"><span class="keyword">function</span>(<span class="params">each</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> each &gt; <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line">isAllPositive; <span class="comment">// true;</span></span><br></pre></td></tr></table></figure> <ul> <li>array.some - 数组中是否有元素满足指定的条件。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 是否有正数</span></span><br><span class="line"><span class="keyword">var</span> isSomePositive = [<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>].some(<span class="function"><span class="keyword">function</span>(<span class="params">each</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> each &gt; <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line">isSomePositive; <span class="comment">// true;</span></span><br><span class="line">isSomePositive = [-<span class="number">3</span>, -<span class="number">4</span>].every(<span class="function"><span class="keyword">function</span>(<span class="params">each</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> each &gt; <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line">isSomePositive; <span class="comment">// false;</span></span><br></pre></td></tr></table></figure> <ul> <li>array.map - 将数组映射成另一个数组。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 内容 * 2</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span>(<span class="params">each</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> each * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 返回 [2, 4, 6]</span></span><br></pre></td></tr></table></figure> <ul> <li>array.reduce - 将数组合成一个值。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组内容求和。0 为初始值</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].reduce(<span class="function"><span class="keyword">function</span>(<span class="params">prev, each</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> prev + each;</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 返回 6</span></span><br></pre></td></tr></table></figure> <blockquote> <p>当要使用迭代方法时，forEach 应该是最后被考虑的。<br>主要原因是：forEach 与其他迭代方法比，语义性是最差的。更详细的说明见 <a href="http://aeflash.com/2014-11/avoid-foreach.html" target="_blank" rel="external">avoid forEach</a>。</p> </blockquote> <p>注意 IE8 及以下版本不支持 every, some, map, reduce。<br>如果想在 IE 8 及以下版本用这几个方法，可以用 <a href="https://github.com/es-shims/es5-shim" target="_blank" rel="external">es5-shim</a> 或 <a href="https://lodash.com/" target="_blank" rel="external">lodash</a>。</p> <h2 id="其他方法">其他方法</h2><ul> <li>Array.isArray - 是否是数组。IE9+ 支持该方法。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.isArray(<span class="number">3</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Array</span>.isArray(&#123;&#125;); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Array</span>.isArray([]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure> <ul> <li>array.concat - 合并数组或合并数组的值。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].concat(<span class="number">4</span>,<span class="number">5</span>); <span class="comment">// 输出 [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure> <ul> <li>array.join - 合并数组所有元素拼接成字符串。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].join(); <span class="comment">// 输出 '1,2,3'</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].join(<span class="string">'@'</span>); <span class="comment">// 输出 '1@2@3'</span></span><br></pre></td></tr></table></figure> <ul> <li>array.slice - 选择数组中的一部分元素。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// slice(开始下标, 结束下标（可选，默认为数组长度）)</span></span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>].slice(<span class="number">1</span>);<span class="comment">// ["b", "c", "d"]</span></span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>].slice(<span class="number">1</span>, <span class="number">2</span>);<span class="comment">// ["b"]</span></span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>].slice(<span class="number">1</span>, <span class="number">3</span>);<span class="comment">// ["b", "c"]</span></span><br></pre></td></tr></table></figure> <ul> <li>array.indexOf - 查找数组中指定元素的下标。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>].indexOf(<span class="string">'c'</span>); <span class="comment">// 2</span></span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>].indexOf(<span class="string">'g'</span>); <span class="comment">// -1</span></span><br></pre></td></tr></table></figure> <ul> <li>array.lastIndexOf - 查找数组中指定元素的下标。查找方向为从后往前。</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'c'</span>].lastIndexOf(<span class="string">'c'</span>); <span class="comment">// 2</span></span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>].lastIndexOf(<span class="string">'g'</span>); <span class="comment">// -1</span></span><br></pre></td></tr></table></figure> </span> </div> <footer class="post-footer"> <div class="post-eof"></div> </footer> </article> <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"> <header class="post-header"> <h1 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/2015/12/27/erlang/用-Elixir-的一周/" itemprop="url"> 用 Elixir 的一周 </a> </h1> <div class="post-meta"> <span class="post-time"> 发表于
<time itemprop="dateCreated" datetime="2015-12-27T16:38:08+08:00" content="2015-12-27"> 2015-12-27 </time> </span>
<span class="post-category"> &nbsp; | &nbsp; 分类于
<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/Elixir/" itemprop="url" rel="index"> <span itemprop="name">Elixir</span> </a> </span> </span>
<span class="post-comments-count"> &nbsp; | &nbsp;
<a href="/2015/12/27/erlang/用-Elixir-的一周/#comments" itemprop="discussionUrl"> <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/27/erlang/用-Elixir-的一周/" itemprop="commentsCount"></span> </a> </span> </div> </header> <div class="post-body"> <span itemprop="articleBody"> <p>大约一周前我开始学习Elixir. 关于这个我也只是有些模糊的印象但还没有仔细去看。</p> <p>但在Dave Thomas 出版了 <a href="https://pragprog.com/book/elixir/programming-elixir" target="_blank" rel="external">Programming Elixir</a>之后一切都发生了改变.<br> Dave Thomas 帮我修订过Erlang这本书并且是Ruby的倡导者, 只要Dave对什么产生了兴趣那绝不是空穴来风.</p> <p> Dave 对Elixir很感兴趣, 在他的书里这样写道:</p> <figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> I came across Ruby <span class="operator">in</span> <span class="number">1998</span> because I was <span class="operator">an</span> avid </span><br><span class="line">reader <span class="operator">of</span> comp.lang.misc (ask your parents). I </span><br><span class="line">downloaded <span class="keyword">it</span>, compiled <span class="keyword">it</span>, <span class="operator">and</span> fell <span class="operator">in</span> love. </span><br><span class="line">As <span class="operator">with</span> <span class="keyword">any</span> <span class="built_in">time</span> you fall <span class="operator">in</span> love,</span><br><span class="line"><span class="keyword">it</span>’s difficult <span class="built_in">to</span> explain why. </span><br><span class="line">It just worked <span class="operator">the</span> way I work, </span><br><span class="line"><span class="operator">and</span> <span class="keyword">it</span> had enough depth <span class="built_in">to</span> keep me interested.</span><br><span class="line"></span><br><span class="line">Fast forward <span class="number">15</span> years. All that <span class="built_in">time</span> I’d been </span><br><span class="line">looking <span class="keyword">for</span> something <span class="built_in">new</span> that gave me <span class="operator">the</span> same feeling.</span><br><span class="line"></span><br><span class="line">I came across Elixir <span class="operator">a</span> <span class="keyword">while</span> back, but <span class="keyword">for</span> some </span><br><span class="line">reason never got stuck <span class="operator">in</span>. But <span class="operator">a</span> few months ago I </span><br><span class="line">was chatting <span class="operator">with</span> Corey Haines. I was</span><br><span class="line">bemoaning <span class="operator">the</span> fact that I wanted <span class="built_in">to</span> find <span class="operator">a</span> </span><br><span class="line">way <span class="built_in">to</span> show people functional programming concepts </span><br><span class="line"><span class="keyword">without</span> <span class="operator">the</span> kind <span class="operator">of</span> academic trappings those books </span><br><span class="line">seem <span class="built_in">to</span> attract. He told me <span class="built_in">to</span> look again <span class="keyword">at</span> Elixir. I</span><br><span class="line">did, <span class="operator">and</span> I felt <span class="operator">the</span> same way I felt when I <span class="keyword">first</span> saw Ruby.</span><br></pre></td></tr></table></figure> <p> 我能体会.纯粹的感官体验. 就像我知道一件事是对的但还不知道原因，<br> 几周甚至几年后这个问题总能回答出来. Malcolm Gladwell在Blink:<br> The Power of Thinking Without Thinking一书中曾探讨过这个问题.<br> 某些领域专家们总能凭直觉判断事情的正确与否，但却给不出具体原因.</p> <p>但我发现Dave 的描述后，我很想知道为什么他会这样.</p> <p>无独有偶, Simon St. Laurent也出了本Elixir的书.<br>Simon的 Introducing Erlang… 一书表现不俗，我和他还通过邮件沟通过几次，还有有些熟悉的.<br>从Pragmatic Press 和O’Reilly 出版社都在争着出版Elixir可见一斑。关于Erlang VM, 我确实一窍不通。</p> <p>我给Dave和Simon 发了封邮件，之后他们借给我了样书，现在可以开始阅读了 … 谢了 …</p> <h3 id="上周我下载了elixir_开始学习…">上周我下载了elixir 开始学习…</h3><p>没多久我觉得就上手了. 确实好东西. 有趣的是Erlang和Elixir 实际上是同源的.<br>事实上也确实这样，他们都会被EVM (Erlang Virtual Machine)编译 -<br>大家管这个EVM 叫 “Beam” VM 但为了和JVM区别就管他叫EVM 吧.</p> <p>Erlang和Elixir为啥有相同的“语意”? 这得从底层谈起.<br>垃圾回收, 独立并发机制, 错误处理和代码装载机制都是一样的.<br> 还有: 他们都运行在相同的VM里. 这也是Scala 和 Akka区别于 Erlang的原因.<br>Scala和Akka是运行在JVM 上的, 垃圾回收和代码装载机制从本质上就不同.</p> <p>Elixir最明显的特点就是语法的表示，和Ruby很像. 简单易懂，还有很多外部资源。</p> <p>Erlang’s 的语法源自 Prolog 还受到smalltalk, CSP 和功能性编程语言的影响.<br> Elixir 受到Erlang 和Ruby的影响. 类型匹配, 功能优先级错误处理机制都是从Erlang来的.sigils,<br> 语法简写从Ruby 来。 当然也有自己的创新, |&gt; 管道操作, Prologs DCGs 和Haskell monads<br> (简化了一些类似于Unix的管道操作) 宏引用,是从lisp quasiquote得来，还有逗号操作符.</p> <p>Elixir更新了AST机制 , 和Erlang AST独有展示的模式不同,<br> Elixir AST 统一了模式这使得meta-programming 更简单.</p> <p> 实现起来也中规中矩，只是有几处需要注意. 字符串插入 (主意不错) ：</p> <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IO<span class="class">.puts</span> <span class="string">"...#&#123;x&#125;..."</span></span><br></pre></td></tr></table></figure> <p>获取x并按格式打印出来. 但只对简单模式的x起作用.</p> <p> 这可以通过从Elixir调用Erlang的方法来弥补</p> <p> IO.puts “…#{pp(x)}…” 就可以. 只是需要把 pp(x) 改成</p> <figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">pp</span></span>(x) <span class="keyword">do</span> </span><br><span class="line">    <span class="symbol">:io_lib</span>.format(<span class="string">"~p"</span>, [x])</span><br><span class="line">    |&gt; <span class="symbol">:lists</span>.flatten</span><br><span class="line">    |&gt; <span class="symbol">:erlang</span>.list_to_binary</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure> <p> Erlang 描述如下:</p> <figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">pp</span><span class="params">(<span class="variable">X</span>)</span> -&gt;</span></span><br><span class="line"> <span class="function_name">list_to_binary</span>(<span class="function_name">lists_flatten</span>(<span class="function_name">li_lib:format</span>(<span class="string">"~p),[X])))</span></span><br></pre></td></tr></table></figure> <p> 这和Elixir的描述一样. Elixir的写法也更容易阅读. |&gt; 操作符用来把io_lib:format 的结果输入到<br> lists:flatten 然后再到list_to_binary. 跟unix的管道符|一样</p> <p> Elixir区别与Erlang在 - 变量可复用.<br> 结果集始终可以表示为static-single-assignment (SSA) .<br> 但在循环结构里千万别这么做.好在 Elixir只用了递归而没有循环结构.<br> 如果循环结构里引用了可变的参数，那远端EVM就没法编译了.<br> 当在SSA顺序结构中使用变量时, EVM 就知道如何处理.循环结构Elixir就没办法了.<br> 其根源可追溯到LLVM汇编- 那就是另一个问题了.</p> <h2 id="编程语言设计的三定律">编程语言设计的三定律</h2><ul> <li><p>你做对的，无人为你提。</p> </li> <li><p>你做错的，有人跟你急。</p> </li> <li><p>难点必须不断重复解释。</p> </li> </ul> <p>有些语言在一些方面做得很好，它们正确，优雅，易于理解，但没人不辞麻烦地提及这些。</p> <p>错误的地方非常糟糕。你成了笨蛋，如果好处比重大于坏处，你可能被原谅。那些你想在以后消除的坏处，<br>却因为向后兼容性或者是有些傻子（或曰你的狂粉）已经用所有那些坏处写了无数行代码等原因，而不能动。</p> <p>难以理解的内容是真正倒霉的事情。你必须一遍又一遍地解释，直到你吐血，可还是有些人永远不懂，<br>你必须写上百邮件和数千文字来一遍又一遍地解释这些内容是什么意思以及它们为什么会如此。<br>对于一个语言的设计者或作者来说，这是一个痛苦的深渊。</p> <p>我将要提到的几件事就是我认为落入这三类情况中的。</p> <p>在我开始前，我要说 Elixir 做对了好多好多的事情，好处远远大于坏处。</p> <p>关于 Elixir 的好处是，及时改正它的坏处还不算晚。<br>这只能在无数代码行被写下和众多程序员开始使用它之前才能做到——所以只有少数时间来解决这些问题了。</p> </span> </div> <footer class="post-footer"> <div class="post-eof"></div> </footer> </article> <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"> <header class="post-header"> <h1 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/2015/12/12/nginx/MAC使用brew安装nginx-php-mysql环境/" itemprop="url"> MAC使用brew安装nginx+php+mysql环境 </a> </h1> <div class="post-meta"> <span class="post-time"> 发表于
<time itemprop="dateCreated" datetime="2015-12-12T15:31:01+08:00" content="2015-12-12"> 2015-12-12 </time> </span>
<span class="post-category"> &nbsp; | &nbsp; 分类于
<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/php/" itemprop="url" rel="index"> <span itemprop="name">php</span> </a> </span> </span>
<span class="post-comments-count"> &nbsp; | &nbsp;
<a href="/2015/12/12/nginx/MAC使用brew安装nginx-php-mysql环境/#comments" itemprop="discussionUrl"> <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/12/nginx/MAC使用brew安装nginx-php-mysql环境/" itemprop="commentsCount"></span> </a> </span> </div> </header> <div class="post-body"> <span itemprop="articleBody"> <h2 id="安装_homebrew">安装 homebrew</h2><blockquote> <p>参考资料：<a href="http://brew.sh/index_zh-cn.html" target="_blank" rel="external">http://brew.sh/index_zh-cn.html</a></p> </blockquote> <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -e &#34;$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)&#34;</span><br></pre></td></tr></table></figure> <h2 id="安装_nginx">安装 nginx</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx</span><br></pre></td></tr></table></figure> <h3 id="nginx_的操作命令：">nginx 的操作命令：</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$打开 nginx</span><br><span class="line">sudo nginx</span><br><span class="line">$重新加载配置|<span class="string">重启</span>|<span class="string">停止</span>|<span class="string">退出 nginx</span><br><span class="line">nginx -s reload</span>|<span class="string">reopen</span>|<span class="string">stop</span>|quit</span><br><span class="line">$测试配置是否有语法错误</span><br><span class="line">nginx -t</span><br></pre></td></tr></table></figure> <p>启动 nginx 后，默认的开启的是8080端口，可以通过修改配置文件来设置端口：</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/usr/</span>local<span class="regexp">/etc/</span>nginx<span class="regexp">/nginx.conf</span></span><br></pre></td></tr></table></figure> <p>默认访问的目录：</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/Cellar/</span>nginx<span class="regexp">/1.8.0/</span>html</span><br></pre></td></tr></table></figure> <h3 id="开机启动">开机启动</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -<span class="tag">p</span> ~/Library/LaunchAgents</span><br><span class="line">cp /usr/local/Cellar/nginx/<span class="number">1.8</span>.<span class="number">0</span>/homebrew<span class="class">.mxcl</span><span class="class">.nginx</span><span class="class">.plist</span> ~/Library/LaunchAgents/</span><br><span class="line">launchctl load -w ~/Library/LaunchAgents/homebrew<span class="class">.mxcl</span><span class="class">.nginx</span><span class="class">.plist</span></span><br></pre></td></tr></table></figure> <p>设置权限：</p> <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chown <span class="string">root:</span>wheel <span class="regexp">/usr/</span>local<span class="regexp">/Cellar/</span>nginx<span class="regexp">/1.8.0/</span>bin/nginx</span><br><span class="line">sudo chmod u+s <span class="regexp">/usr/</span>local<span class="regexp">/Cellar/</span>nginx<span class="regexp">/1.8.0/</span>bin/nginx</span><br></pre></td></tr></table></figure> <h2 id="安装mysql">安装mysql</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span>install mysql</span><br></pre></td></tr></table></figure> <h3 id="配置mysql数据库：">配置mysql数据库：</h3><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">mysql_install_db</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">verbose</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">user=`whoami`</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">basedir="$(brew</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">prefix</span> <span class="comment">mysql)"</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">datadir=/usr/local/var/mysql</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">tmpdir=/tmp</span></span><br></pre></td></tr></table></figure> <p>执行完成后就可以在终端中运行 mysql 命令了。</p> <p>这里需要注意一下，我们可以不需要密码就可以进入 mysql，可以通过一些安全设置、设置用户密码来保证安全性。</p> <p>设置 mysql 开机启动：</p> <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -<span class="tag">p</span> ~/Library/LaunchAgents/</span><br><span class="line">cp /usr/local/Cellar/mysql/<span class="number">5.6</span>.<span class="number">17</span>/homebrew<span class="class">.mxcl</span><span class="class">.mysql</span><span class="class">.plist</span> ~/Library/LaunchAgents/</span><br><span class="line">launchctl load -w ~/Library/LaunchAgents/homebrew<span class="class">.mxcl</span><span class="class">.mysql</span><span class="class">.plist</span></span><br></pre></td></tr></table></figure> <p>mysql 配置文件：</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/Cellar/my</span>sql<span class="regexp">/5.6.17/my</span>.cnf</span><br></pre></td></tr></table></figure> <h2 id="安装_php">安装 php</h2><p>MAC本来就自带了 php，但是很多扩展没有安装，所以选择了重新安装php。</p> <p>首先，我们需要安装第三方程序包。</p> <figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span>tap homebrew/dupes</span><br><span class="line"><span class="keyword">brew </span>tap josegonzalez/homebrew-php</span><br></pre></td></tr></table></figure> <p>我们可以查看下 brew 下有那些 php 版本</p> <figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span>search php</span><br></pre></td></tr></table></figure> <figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install php55 --<span class="keyword">with</span>-imap --<span class="keyword">with</span>-tidy --<span class="keyword">with</span>-<span class="keyword">debug</span> --<span class="keyword">with</span>-pgsql --<span class="keyword">with</span>-mysql --<span class="keyword">with</span>-fpm</span><br></pre></td></tr></table></figure> <p>更多的php选项可以通过以下命令查看：</p> <figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span>options php55</span><br></pre></td></tr></table></figure> <p>由于是重装php，之前系统预装的php还没卸载，因此在终端调用php时，还是以之前系统的php版本做解析，<br>所以这里需要修改path，指定 php 的解析路径。在~/.bashrc（没有则创建）最后加入一行：</p> <p>export PATH=”$(brew –prefix php55)/bin:$PATH”</p> <p>执行一下 source 使之生效</p> <figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">source</span> ./.<span class="keyword">profile</span></span><br></pre></td></tr></table></figure> <p>php 配置文件：</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/etc/</span>php<span class="regexp">/5.5/</span>php.ini</span><br></pre></td></tr></table></figure> <p>php-fpm 配置文件：</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/etc/</span>php<span class="regexp">/5.5/</span>php-fpm.conf</span><br></pre></td></tr></table></figure> <p>启动 php-fpm 的话就直接在终端里执行 “php-fpm”，默认打开 php-fpm 会显示一个状态 shell 出来，<br>也可以把 php-fpm 的配置文件里的 “daemonize = no” 改为 “daemonize = yes”，就会以后台守护进程的方式启动，<br>对于刚修改的配置文件，可以执行 “php-fpm -t” 来检测配置有没有问题。</p> <p>开机启动php-fpm:</p> <p>mkdir -p ~/Library/LaunchAgents<br>cp /usr/local/Cellar/php55/5.5.26/homebrew-php.josegonzalez.php55.plist ~/Library/LaunchAgents/<br>launchctl load -w ~/Library/LaunchAgents/homebrew-php.josegonzalez.php55.plist</p> </span> </div> <footer class="post-footer"> <div class="post-eof"></div> </footer> </article> <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"> <header class="post-header"> <h1 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/2015/11/22/webpack/设置webpack实现React项目的hot-load/" itemprop="url"> 设置webpack实现React项目的hot load </a> </h1> <div class="post-meta"> <span class="post-time"> 发表于
<time itemprop="dateCreated" datetime="2015-11-22T13:38:36+08:00" content="2015-11-22"> 2015-11-22 </time> </span>
<span class="post-category"> &nbsp; | &nbsp; 分类于
<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/javascript/" itemprop="url" rel="index"> <span itemprop="name">javascript</span> </a> </span> </span>
<span class="post-comments-count"> &nbsp; | &nbsp;
<a href="/2015/11/22/webpack/设置webpack实现React项目的hot-load/#comments" itemprop="discussionUrl"> <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/22/webpack/设置webpack实现React项目的hot-load/" itemprop="commentsCount"></span> </a> </span> </div> </header> <div class="post-body"> <span itemprop="articleBody"> <p>编写了简单的项目: <a href="https://github.com/MarshalW/react-proto/tree/m1" target="_blank" rel="external">react-proto m1</a>。用来说明如何设置简单的React开发环境。<br>通过webpack及其插件 <a href="https://github.com/gaearon/react-hot-loader" target="_blank" rel="external">react-hot-loader</a>，实现js/jsx代码修改后，浏览器中的网页能自动加载js。</p> <h2 id="准备工作">准备工作</h2><p>安装webpack，见 <a href="http://webpack.github.io/docs/tutorials/getting-started/" target="_blank" rel="external">webpack getting started</a>。</p> <h2 id="导入项目及运行">导入项目及运行</h2><p>见这里：<a href="https://github.com/MarshalW/react-proto/blob/master/README.md#%E5%AE%89%E8%A3%85%E4%B8%8E%E8%BF%90%E8%A1%8C" target="_blank" rel="external">README.md#安装与运行</a>。</p> <p>运行的截图：</p> <p><img src="http://marshal.ohtly.com/images/browser-react-hot-loader.png" alt="react"></p> <p>相关文件的说明</p> <ul> <li>webpack.config.js：webpack的配置文件</li> <li>server.js：用于开发阶段测试使用的webserver</li> <li>index.html：webapp的网页</li> <li>scripts目录：存放js脚本<ul> <li>index.js：js入口文件</li> <li>App.js：webapp js的入口文件，这里使用了ES6的语法，webpack使用了babel将ES6语法代码转换成ES5的代码</li> </ul> </li> </ul> </span> </div> <footer class="post-footer"> <div class="post-eof"></div> </footer> </article> <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"> <header class="post-header"> <h1 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/2015/11/21/Create-a-character-voting-app-using-React-Node-js-MongoDB-and-Socket-IO/" itemprop="url"> Create a character voting app using React, Node.js, MongoDB and Socket.IO </a> </h1> <div class="post-meta"> <span class="post-time"> 发表于
<time itemprop="dateCreated" datetime="2015-11-21T11:38:11+08:00" content="2015-11-21"> 2015-11-21 </time> </span>
<span class="post-category"> &nbsp; | &nbsp; 分类于
<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/javascript/" itemprop="url" rel="index"> <span itemprop="name">javascript</span> </a> </span> </span>
<span class="post-comments-count"> &nbsp; | &nbsp;
<a href="/2015/11/21/Create-a-character-voting-app-using-React-Node-js-MongoDB-and-Socket-IO/#comments" itemprop="discussionUrl"> <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/21/Create-a-character-voting-app-using-React-Node-js-MongoDB-and-Socket-IO/" itemprop="commentsCount"></span> </a> </span> </div> </header> <div class="post-body"> <span itemprop="articleBody"> <h3 id="Update_Notice_2_(November_12,_2015)">Update Notice 2 (November 12, 2015)</h3><p>Tutorial has been updated to use <a href="https://medium.com/@malyw/how-to-update-babel-5-x-6-x-d828c230ec53" target="_blank" rel="external">Babel</a> 6.0 and<br> React <a href="https://github.com/rackt/react-router/releases/tag/v1.0.0" target="_blank" rel="external">Router 1.0</a>. For detailed tutorial updates see November 12, 2015 notes below.</p> <h3 id="Update_Notice_1_(October_19,_2015)">Update Notice 1 (October 19, 2015)</h3><p>Tutorial has been updated to use React 0.14 and React Router 1.0-rc3 that introduced breaking changes.<br>For detailed tutorial updates see October 19, 2015 notes below.</p> <h2 id="Overview">Overview</h2><p>In this tutorial we are going to build a character voting app (inspired by Facemash and Hot or Not)<br>for <a href="http://www.eveonline.com/" target="_blank" rel="external">EVE Online</a> - a massively multiplayer online game.<br>Be sure to play this awesome soundtrack below to get yourself in the mood for this epicly long tutorial.</p> <p>While listening to this soundtrack, imagine yourself mining asteroid belts in deep space while<br>keeping a lookout for pirates on the radar, researching propulsion system blueprints at the station’s facility,<br>manufacturing spaceship components for capital ships, placing buy &amp; sell orders on the entirely<br>player-driven market where supply and demand govern the game economics, hauling trade goods from a remote solar system<br>in a massive freighter, flying blazingly fast interceptors with a microwarpdrive or powerful battleships armored to<br>the teeth, optimizing extraction efficiency of rare minerals from planets,<br>or fighting large-scale battles with thousands of players from multiple alliances. That is <strong><em> EVE Online </em></strong>.</p> <p>Each player in EVE Online has a 3D avatar representing their character.<br>This app is designed for ranking those avatars. Anyway, your goal here is to learn about Node.js,<br>React and Flux, not EVE Online. But I will say this: “Having an interesting tutorial project is just as important,<br>if not more so, than the main subject of the tutorial”.<br>The only reason I built the original New Eden Faces app is to learn Backbone.js and the only reason I built the<br> TV Show Tracker app is so that I could learn AngularJS. To me, either one of these projects is far more<br> interesting than a simple todo app that everyone seems to be using these days.</p> <p> One thing that I have learned — between screencasts, books and training videos,<br> nothing is more effective than building a small project that you are passionate about to learn a new technology.</p> </span> </div> <footer class="post-footer"> <div class="post-eof"></div> </footer> </article> <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"> <header class="post-header"> <h1 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/2015/11/20/javascript/JavaScript-异步方案-async-await/" itemprop="url"> JavaScript 异步方案 async/await </a> </h1> <div class="post-meta"> <span class="post-time"> 发表于
<time itemprop="dateCreated" datetime="2015-11-20T21:57:18+08:00" content="2015-11-20"> 2015-11-20 </time> </span>
<span class="post-category"> &nbsp; | &nbsp; 分类于
<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/javascript/" itemprop="url" rel="index"> <span itemprop="name">javascript</span> </a> </span> </span>
<span class="post-comments-count"> &nbsp; | &nbsp;
<a href="/2015/11/20/javascript/JavaScript-异步方案-async-await/#comments" itemprop="discussionUrl"> <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/20/javascript/JavaScript-异步方案-async-await/" itemprop="commentsCount"></span> </a> </span> </div> </header> <div class="post-body"> <span itemprop="articleBody"> <p>构建一个应用程序总是会面对异步调用，不论是在 Web 前端界面，还是 Node.js 服务端都是如此，JavaScript 里面处理异步调用一直是非常恶心的一件事情。<br>以前只能通过回调函数，后来渐渐又演化出来很多方案，最后 Promise 以简单、易用、兼容性好取胜，但是仍然有非常多的问题。<br>其实 JavaScript 一直想在语言层面彻底解决这个问题，在 ES6 中就已经支持原生的 Promise，还引入了 Generator 函数，终于在 ES7 中决定支持 async 和 await。</p> <h2 id="基本语法">基本语法</h2><p>async/await 究竟是怎么解决异步调用的写法呢？简单来说，就是将异步操作用同步的写法来写。先来看下最基本的语法（ES7 代码片段）：</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> f = () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>((resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      resolve(<span class="number">123</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testAsync = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> t = <span class="keyword">await</span> f();</span><br><span class="line">  <span class="built_in">console</span>.log(t);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">testAsync();</span><br></pre></td></tr></table></figure> <p>首先定义了一个函数 <code>f</code>，这个函数返回一个 <code>Promise</code>，并且会延时 2 秒，<code>resolve</code> 并且传入值 123。<code>testAsync</code> 函数在定义时使用了关键字 <code>async</code>，<br>然后函数体中配合使用了 <code>await</code>，最后执行 <code>testAsync</code>。整个程序会在 2 秒后输出 123，也就是说 <code>testAsync</code> 中常量 t 取得了 <code>f</code>中 <code>resolve</code> 的值，<br>并且通过 <code>await</code> 阻塞了后面代码的执行，直到 <code>f</code>这个异步函数执行完。</p> <h2 id="对比_Promise">对比 Promise</h2><p>仅仅是一个简单的调用，就已经能够看出来 <code>async/await</code> 的强大，写码时可以非常优雅地处理异步函数，彻底告别回调恶梦和无数的 then 方法。<br>我们再来看下与 <code>Promise</code> 的对比，同样的代码，如果完全使用 <code>Promise</code> 会有什么问题呢？</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> f = () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>((resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      resolve(<span class="number">123</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testAsync = () =&gt; &#123;</span><br><span class="line">  f().then((t) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(t);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">testAsync();</span><br></pre></td></tr></table></figure> <p>从代码片段中不难看出 <code>Promise</code> 没有解决好的事情，比如要有很多的 then 方法，整块代码会充满 <code>Promise</code> 的方法，而不是业务逻辑本身，<br>而且每一个 <code>then</code> 方法内部是一个独立的作用域，要是想共享数据，就要将部分数据暴露在最外层，在 then 内部赋值一次。<br>虽然如此，<code>Promise</code> 对于异步操作的封装还是非常不错的，所以 <code>async/await</code> 是基于 <code>Promise</code> 的，await 后面是要接收一个 Promise 实例。</p> <h2 id="对比_RxJS">对比 RxJS</h2><p>RxJS 也是非常有意思的东西，用来处理异步操作，它更能处理基于流的数据操作。<br>举个例子，比如在 Angular2 中 http 请求返回的就是一个 RxJS 构造的 Observable Object，我们就可以这样做：</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$http.get(url)</span><br><span class="line">  .map(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value + <span class="number">1</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .filter(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value !== <span class="literal">null</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;)</span><br><span class="line">  .subscribe(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'do something.'</span>);</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure> <p>如果是 ES6 代码可以进一步简洁：</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$http.get(url) </span><br><span class="line">  .map(value =&gt; value + <span class="number">1</span>) </span><br><span class="line">  .filter(value =&gt; value !== <span class="literal">null</span>) </span><br><span class="line">  .forEach(value =&gt; <span class="built_in">console</span>.log(value)) </span><br><span class="line">  .subscribe((value) =&gt; &#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'do something.'</span>); </span><br><span class="line">  &#125;, (err) =&gt; &#123; </span><br><span class="line">    <span class="built_in">console</span>.log(err); </span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure> <p>可以看出 RxJS 对于这类数据可以做一种类似流式的处理，也是非常优雅，<br>而且 RxJS 强大之处在于你还可以对数据做取消、监听、节流等等的操作，这里不一一举例了，感兴趣的话可以去看下 RxJS 的 API。</p> <p>这里要说明一下的就是 RxJS 和 async/await 一起用也是可以的，Observable Object 中有 toPromise 方法，可以返回一个 Promise Object，<br>同样可以结合 await 使用。<br>当然你也可以只使用 async/await 配合 underscore 或者其他库，也能实现很优雅的效果。总之，RxJS 与 async/await 不冲突。</p> <h2 id="异常处理">异常处理</h2><p>通过使用 async/await，我们就可以配合 try/catch 来捕获异步操作过程中的问题，包括 Promise 中 reject 的数据。</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> f = () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>((resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      reject(<span class="number">234</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testAsync = () =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> t = <span class="keyword">await</span> f();</span><br><span class="line">    <span class="built_in">console</span>.log(t);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">testAsync();</span><br></pre></td></tr></table></figure> <p>代码片段中将 f 方法中的 <code>resolve</code> 改为 reject，在 testAsync 中，通过 <code>catch</code> 可以捕获到 <code>reject</code> 的数据，输出 err 的值为 234。<br><code>try/catch</code> 使用时也要注意范围和层级。如果 try 范围内包含多个 await，那么 catch 会返回第一个 <code>reject</code> 的值或错误。</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> f1 = () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>((resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      reject(<span class="number">111</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> f2 = () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>((resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      reject(<span class="number">222</span>);</span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testAsync = () =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> t1 = <span class="keyword">await</span> f1();</span><br><span class="line">    <span class="built_in">console</span>.log(t1);</span><br><span class="line">    <span class="keyword">const</span> t2 = <span class="keyword">await</span> f2();</span><br><span class="line">    <span class="built_in">console</span>.log(t2);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">testAsync();</span><br></pre></td></tr></table></figure> <p>如代码片段所示，testAsync 函数体中 try 有两个 await 函数，而且都分别 reject，那么 catch 中仅会触发 f1 的 reject，输出的 err 值是 111。</p> <h2 id="开始使用">开始使用</h2><p>无论是 Web 前端还是 Node.js 服务端，都可以通过预编译的手段实现使用 ES6 和 ES7 来写代码，<br>目前最流行的方案是通过 Babel 将使用 ES7、ES6 写的代码编译为 E6 或 ES5 的代码来执行。</p> <h2 id="Node-js_服务端配置">Node.js 服务端配置</h2><p>服务端使用 Babel，最简单的方式是通过 require hook。</p> <p>首先安装 Babel：</p> <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install babel-core --save</span><br></pre></td></tr></table></figure> <p>安装 async/await 支持：</p> <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install babel-preset-stage-3 --save</span><br></pre></td></tr></table></figure> <p>在服务端代码的根目录中配置 .babelrc 文件，内容为：</p> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "<span class="attribute">presets</span>": <span class="value">[<span class="string">"stage-3"</span>]</span><br><span class="line"></span>&#125;</span><br></pre></td></tr></table></figure> <p>在顶层代码文件（server.js 或 app.js 等）中引入 Babel 模块：</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">"babel-core/register"</span>);</span><br></pre></td></tr></table></figure> <p>在这句后面引入的模块，都将会自动通过 babel 编译，但当前文件不会被 babel 编译。<br>另外，需要注意 Node.js 的版本，如果是 4.0 以上的版本则默认支持绝大部分 ES6，可以直接启动。<br>但是如果是 0.12 左右的版本，就需要通过 node —harmory 来启动才能够支持。因为 stage-3 模式，Babel 不会编译基本的 ES6 代码，<br>环境既然支持又何必要编译为 ES5？这样做也是为了提高性能和编译效率。</p> <h2 id="配置_Web_前端构建">配置 Web 前端构建</h2><p>可以通过增加 Gulp 的预编译 task 来支持。</p> <p>首先安装 gulp-babel 插件：</p> <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install gulp-babel --save-dev</span><br></pre></td></tr></table></figure> <p>然后编写配置：</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> babel = <span class="built_in">require</span>(<span class="string">'gulp-babel'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'babel'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'src/app.js'</span>)</span><br><span class="line">    .pipe(babel())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <p>除了 Gulp-babel 插件，也可以使用官方的 Babel-loader 结合 Webpack 或 Browserify 使用。</p> </span> </div> <footer class="post-footer"> <div class="post-eof"></div> </footer> </article> <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"> <header class="post-header"> <h1 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/2015/10/31/mongodb/Mac-OX上安装MongoDb/" itemprop="url"> Mac OX上安装MongoDb </a> </h1> <div class="post-meta"> <span class="post-time"> 发表于
<time itemprop="dateCreated" datetime="2015-10-31T08:53:53+08:00" content="2015-10-31"> 2015-10-31 </time> </span>
<span class="post-category"> &nbsp; | &nbsp; 分类于
<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/数据库/" itemprop="url" rel="index"> <span itemprop="name">数据库</span> </a> </span> </span>
<span class="post-comments-count"> &nbsp; | &nbsp;
<a href="/2015/10/31/mongodb/Mac-OX上安装MongoDb/#comments" itemprop="discussionUrl"> <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/31/mongodb/Mac-OX上安装MongoDb/" itemprop="commentsCount"></span> </a> </span> </div> </header> <div class="post-body"> <span itemprop="articleBody"> <h2 id="install_MongoDb">install MongoDb</h2><blockquote> <p>更新Homebrew的package数据库，在Mac的终端中输入：</p> </blockquote> <figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">brew </span>update</span><br></pre></td></tr></table></figure> <p>然后</p> <figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">brew </span>install mongodb</span><br></pre></td></tr></table></figure> <p>等待MongoDb下载完成。这个比较贴心了，有下载进度百分比。</p> <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">julauddeMacBook-Pro:/ julaud$ brew install mongodb</span><br><span class="line">==&gt; Downloading https:<span class="comment">//homebrew.bintray.com/bottles/mongodb-3.0.7.yosemite.bott</span></span><br><span class="line">Already downloaded: /Library/Caches/Homebrew/mongodb-<span class="number">3.0</span>.<span class="number">7</span><span class="class">.yosemite</span><span class="class">.bottle</span><span class="class">.tar</span><span class="class">.gz</span></span><br><span class="line">==&gt; Pouring mongodb-<span class="number">3.0</span>.<span class="number">7</span><span class="class">.yosemite</span><span class="class">.bottle</span><span class="class">.tar</span><span class="class">.gz</span></span><br><span class="line">==&gt; Caveats</span><br><span class="line">To have launchd start mongodb at login:</span><br><span class="line">  ln -sfv /usr/local/opt/mongodb<span class="comment">/*.plist ~/Library/LaunchAgents</span><br><span class="line">Then to load mongodb now:</span><br><span class="line">  launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mongodb.plist</span><br><span class="line">Or, if you don't want/need launchctl, you can just run:</span><br><span class="line">  mongod --config /usr/local/etc/mongod.conf</span><br><span class="line">==&gt; Summary</span><br><span class="line">🍺  /usr/local/Cellar/mongodb/3.0.7: 17 files, 158M</span></span><br></pre></td></tr></table></figure> <h2 id="启动MongoDb">启动MongoDb</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">🍺  <span class="regexp">/usr/</span>local<span class="regexp">/Cellar/</span>mongodb/<span class="number">3.0</span><span class="number">.7</span>: <span class="number">17</span> files, <span class="number">158</span>M</span><br><span class="line">julauddeMacBook-<span class="string">Pro:</span><span class="regexp">/ julaud$ mongod --config /</span>usr<span class="regexp">/local/</span>etc/mongod.conf</span><br></pre></td></tr></table></figure> <p>运行mongodb执行 mongod命令就可以<br>mongod –dbpath=/data/db</p> <h2 id="连接MongoDb">连接MongoDb</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Last login: Thu Oct <span class="number">29</span> <span class="number">20</span>:<span class="number">36</span>:<span class="number">01</span> on ttys000</span><br><span class="line">julauddeMacBook-Pro:~ julaud$ mongo</span><br><span class="line">MongoDB shell version: <span class="number">3.0</span><span class="number">.7</span></span><br><span class="line">connecting to: test</span><br><span class="line">Welcome to the MongoDB shell.</span><br><span class="line">For interactive help, type <span class="string">"help"</span>.</span><br><span class="line">For more comprehensive documentation, see</span><br><span class="line">	http:<span class="comment">//docs.mongodb.org/</span></span><br><span class="line">Questions? Try the support group</span><br><span class="line">	http:<span class="comment">//groups.google.com/group/mongodb-user</span></span><br><span class="line">Server has startup warnings:</span><br><span class="line"><span class="number">2015</span>-<span class="number">10</span>-<span class="number">30</span>T22:<span class="number">55</span>:<span class="number">29.874</span>+<span class="number">0800</span> I CONTROL  [initandlisten]</span><br><span class="line"><span class="number">2015</span>-<span class="number">10</span>-<span class="number">30</span>T22:<span class="number">55</span>:<span class="number">29.874</span>+<span class="number">0800</span> I CONTROL  [initandlisten] ** WARNING: soft rlimits too low. Number of files is <span class="number">256</span>, should be at least <span class="number">1000</span></span><br><span class="line">&gt; show dbs</span><br><span class="line">local  <span class="number">0.078</span>GB</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure> </span> </div> <footer class="post-footer"> <div class="post-eof"></div> </footer> </article> <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"> <header class="post-header"> <h1 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/2015/10/26/浏览器同步测试工具Browsersync/" itemprop="url"> 浏览器同步测试工具Browsersync | 前端开发神器 </a> </h1> <div class="post-meta"> <span class="post-time"> 发表于
<time itemprop="dateCreated" datetime="2015-10-26T20:39:40+08:00" content="2015-10-26"> 2015-10-26 </time> </span>
<span class="post-category"> &nbsp; | &nbsp; 分类于
<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/开发工具/" itemprop="url" rel="index"> <span itemprop="name">开发工具</span> </a> </span> </span>
<span class="post-comments-count"> &nbsp; | &nbsp;
<a href="/2015/10/26/浏览器同步测试工具Browsersync/#comments" itemprop="discussionUrl"> <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/26/浏览器同步测试工具Browsersync/" itemprop="commentsCount"></span> </a> </span> </div> </header> <div class="post-body"> <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery"> <div class="post-gallery-row"> <a class="post-gallery-img fancybox" href="http://zanjs.b0.upaiyun.com/image/f/75/e7f9489cd69d1625e5326665f247b.jpg" rel="gallery_cik20cd1f0004vh55yvvfit3x" itemscope itemtype="http://schema.org/ImageObject" itemprop="url"> <img src="http://zanjs.b0.upaiyun.com/image/f/75/e7f9489cd69d1625e5326665f247b.jpg" itemprop="contentUrl"> </a> </div> </div> <span itemprop="articleBody"> <h2 id="省时的浏览器同步测试工具">省时的浏览器同步测试工具</h2><blockquote> <p>Browsersync能让浏览器实时、快速响应您的文件更改（html、js、css、sass、less等）并自动刷新页面。<br>更重要的是Browsersync可以同时在PC、平板、手机等设备下进项调试。<br>您可以想象一下：“假设您的桌子上有pc、ipad、iphone、android等设备，同时打开了您需要调试的页面，<br>当您使用browsersync后，您的任何一次代码保存，以上的设备都会同时显示您的改动”。<br>无论您是前端还是后端工程师，使用它将提高您30%的工作效率。</p> </blockquote> <p><img src="http://zanjs.b0.upaiyun.com/image/8/89/55a39bc2736a6f8d306d0c92e1df0.gif" alt="同步浏览"></p> <p>有了它，您不用在多个浏览器、多个设备间来回切换，频繁的刷新页面。<br>更神奇的是您在一个浏览器中滚动页面、点击等行为也会同步到其他浏览器和设备中，这一切还可以通过可视化界面来控制。</p> <p><img src="http://zanjs.b0.upaiyun.com/image/1/c4/aceebbaf49ede7e599027d0d48565.gif" alt="同步测试"></p> <h2 id="您不可或缺的测试助手">您不可或缺的测试助手</h2><h3 id="简化操作流程">简化操作流程</h3><p>每个网页在不同设备的浏览器里，测试时间呈指数级增长，无论是PC还是移动端。<br>曾经我们每改一次的代码，都需要手动去刷新一次页面，查看我们的改动是否正确；<br>现在，BrowserSync减少了重复的手工任务，这一切都交给BrowserSync去完成，我们只需专注在业务的逻辑里去。</p> <h3 id="工作中您需要它">工作中您需要它</h3><p>BrowserSync是建立在网络技术上的，您可以轻松安装在OS X，Windows或Linux上，然后在不同的设备及浏览器里进行调试。<br>就连UI都可以运行在浏览器 - 尝试在另一台设备上创建第二页面来控制您的BrowserSync。</p> <h3 id="插入到您的工作流程">插入到您的工作流程</h3><p>通过可视化的操作方式或命令行来创建个性化的测试环境，多设备共同响应。<br>BrowserSync很容易与您的网络平台集成，构建工具和其他Node项目中，例如gulp、grunt。</p> <h2 id="更多功能的加入，完全免费。">更多功能的加入，完全免费。</h2><h3 id="交互同步">交互同步</h3><p>您的滚动，点击，刷新等操作可以在不同浏览器之间同步更新。</p> <h3 id="文件同步">文件同步</h3><p>当您改变HTML，CSS，图像和其他项目文件浏览器会自动更新。</p> <h3 id="URL历史_NEW">URL历史 NEW</h3><p>记录您的测试网址，您只需点击一次，就可以在不同设备里访问。</p> <h3 id="同步定制_NEW">同步定制 NEW</h3><p>切换各个同步设置创建您的首选测试环境。</p> <h3 id="远程督察_NEW">远程督察 NEW</h3><p>远程调整和正在对连接的设备运行调试网页。</p> <h3 id="URL通道_NEW">URL通道 NEW</h3><p>创建一个安全的公共URL分享您的本地站点，任何设备都可以访问它，并可以响应您的任何改动。</p> <h3 id="UI或命令行控制_NEW">UI或命令行控制 NEW</h3><p>使用可视化页面来进行相关设置，也可以使用命令行来完成。</p> <h3 id="浏览器支持">浏览器支持</h3><p>支持PC，平板电脑和手机之间的即时同步。各种文件及时响应，堪称完美。</p> <h3 id="构建工具兼容">构建工具兼容</h3><p>可轻松与grunt、gulp等工具配合使用，或包含在其它node项目里。</p> <h3 id="服务于任何本地站点">服务于任何本地站点</h3><p>可以在PHP，ASP，Rails和更多网站运行使用。也可以创建静态环境。</p> <h3 id="安装并运行在任何地方">安装并运行在任何地方</h3><p>基于Node.js并支持Windows，MacOS和Linux操作系统，设置只需要5分钟。</p> <h3 id="空闲运行并再利用">空闲运行并再利用</h3><p>浏览器同步是一个开源项目，可根据Apache2.0许可使用或更改。</p> <h2 id="5分钟快速入门">5分钟快速入门</h2><ol> <li>安装 Node.js</li> </ol> <p>BrowserSync是基于Node.js的, 是一个Node模块， 如果您想要快速使用它，也许您需要先安装一下Node.js</p> <p><a href="http://nodejs.org/download/" target="_blank" rel="external">安装适用于Mac OS，Windows和Linux。</a></p> <ol> <li>安装 BrowserSync</li> </ol> <p>您可以选择从Node.js的包管理（NPM）<a href="https://npmjs.org/package/browser-sync" target="_blank" rel="external">库中</a> 安装BrowserSync。<br>打开一个终端窗口，运行以下命令：</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> -<span class="keyword">g</span> browser-<span class="keyword">sync</span></span></span><br></pre></td></tr></table></figure> <blockquote> <p>您告诉包管理器下载BrowserSync文件，并在全局下安装它们，您可以在所有项目(任何目录)中使用。</p> </blockquote> <p>当然您也可以结合<code>gulpjs</code>或<code>gruntjs</code>构建工具来使用，在您需要构建的项目里运行下面的命令:</p> <figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> browser-sync</span><br></pre></td></tr></table></figure> <ol> <li>启动 BrowserSync</li> </ol> <p>一个基本用途是，如果您只希望在对某个css文件进行修改后会同步到浏览器里。<br>那么您只需要运行命令行工具，进入到该项目（目录）下，并运行相应的命令：</p> <blockquote> <p>静态网站</p> </blockquote> <p>如果您想要监听.css文件, 您需要使用服务器模式。 BrowserSync 将启动一个小型服务器，并提供一个URL来查看您的网站。</p> <figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// --<span class="keyword">files</span> 路径是相对于运行该命令的项目（目录）</span><br><span class="line">browser-<span class="keyword">sync</span> start --server --<span class="keyword">files</span> <span class="string">"css/*.css"</span></span><br></pre></td></tr></table></figure> <p>如果您需要监听多个类型的文件，您只需要用逗号隔开。例如我们再加入一个.html文件</p> <figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// --<span class="keyword">files</span> 路径是相对于运行该命令的项目（目录）</span><br><span class="line">browser-<span class="keyword">sync</span> start --server --<span class="keyword">files</span> <span class="string">"css/*.css, *.html"</span></span><br><span class="line">// 如果你的文件层级比较深，您可以考虑使用 **（表示任意目录）匹配，任意目录下任意.css 或 .html文件。</span><br><span class="line">browser-<span class="keyword">sync</span> start --server --<span class="keyword">files</span> <span class="string">"**/*.css, **/*.html"</span></span><br></pre></td></tr></table></figure> <p>我们做了一个静态例子的示范，您可以下载示例包，文件您可以解压任何盘符的任何目录下，不能是中文路径。<br>打开您的命令行工具，进入到BrowsersyncExample目录下，运行以下其中一条命令。<br>Browsersync将创建一个本地服务器并自动打开你的浏览器后访问<a href="http://localhost:3000地址，这一切都会在命令行工具里显示。" target="_blank" rel="external">http://localhost:3000地址，这一切都会在命令行工具里显示。</a><br>你也可以查看Browsersync静态示例视频</p> <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听css文件</span></span><br><span class="line">browser-sync start --<span class="keyword">server</span> --files <span class="string">"css/*.css"</span></span><br><span class="line"><span class="comment">// 监听css和html文件</span></span><br><span class="line">browser-sync start --<span class="keyword">server</span> --files <span class="string">"css/*.css, *.html"</span></span><br></pre></td></tr></table></figure> <blockquote> <p>动态网站</p> </blockquote> <p>如果您已经有其他本地服务器环境PHP或类似的，您需要使用代理模式。<br>BrowserSync将通过代理URL(localhost:3000)来查看您的网站。</p> <figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 主机名可以是<span class="literal">ip</span>或域名</span><br><span class="line"><span class="keyword">browser-sync </span>start --proxy <span class="string">"主机名"</span> <span class="string">"css/*.css"</span></span><br></pre></td></tr></table></figure> <p>在本地创建了一个PHP服务器环境，并通过绑定Browsersync.cn来访问本地服务器，<br>使用以下命令方式，Browsersync将提供一个新的地址localhost:3000来访问Browsersync.cn，并监听其css目录下的所有css文件。</p> <figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">browser-sync </span>start --proxy <span class="string">"Browsersync.cn"</span> <span class="string">"css/*.css"</span></span><br></pre></td></tr></table></figure> <p>一点建议</p> <p>我们建议您结合gulp或grunt来使用，我们这里有详细说明Gulp文档、Grunt文档。<br>如果您还没有使用gulp或grunt，那么可以通过以上方式创建Browsersync</p> </span> </div> <footer class="post-footer"> <div class="post-eof"></div> </footer> </article> </section> <nav class="pagination"> <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a> </nav> </div> </div> <div class="sidebar-toggle"> <div class="sidebar-toggle-line-wrap"> <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
<span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
<span class="sidebar-toggle-line sidebar-toggle-line-last"></span> </div> </div> <aside id="sidebar" class="sidebar"> <div class="sidebar-inner"> <section class="site-overview sidebar-panel sidebar-panel-active"> <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" src="https://avatars2.githubusercontent.com/u/12947276?v=3&s=460" alt="Julaud" itemprop="image"> <p class="site-author-name" itemprop="name">Julaud</p> </div> <p class="site-description motion-element" itemprop="description">一米阳光下，一本书，一个人，思念昉~</p> <nav class="site-state motion-element"> <div class="site-state-item site-state-posts"> <a href="/archives"> <span class="site-state-item-count">13</span>
<span class="site-state-item-name">日志</span> </a> </div> <div class="site-state-item site-state-categories"> <a href="/categories"> <span class="site-state-item-count">7</span>
<span class="site-state-item-name">分类</span> </a> </div> <div class="site-state-item site-state-tags"> <a href="/tags"> <span class="site-state-item-count">26</span>
<span class="site-state-item-name">标签</span> </a> </div> </nav> <div class="feed-link motion-element"> <a href="/atom.xml" rel="alternate"> <i class="menu-item-icon icon-next-feed"></i>
RSS </a> </div> <div class="links-of-author motion-element"> <span class="links-of-author-item"> <a href="https://github.com/zanjs" target="_blank"> <i class="fa fa-github fa-fw"></i> github </a> </span>
<span class="links-of-author-item"> <a href="https://twitter.com/zanjs" target="_blank"> <i class="fa fa-twitter fa-fw"></i> twitter </a> </span>
<span class="links-of-author-item"> <a href="http://weibo.com/5315557778" target="_blank"> <i class="fa fa-weibo fa-fw"></i> weibo </a> </span> </div> <div class="links-of-author motion-element"> </div> </section> </div> </aside> </main> <footer id="footer" class="footer"> <div class="footer-inner"> <div class="copyright"> &copy; 2015 -
<span itemprop="copyrightYear">2016</span>
<span class="with-love"> <i class="icon-next-heart fa fa-heart"></i> </span>
<span class="author" itemprop="copyrightHolder">Julaud</span> </div> </div> </footer> <div class="back-to-top"></div> </div> <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script><script type="text/javascript">var duoshuoQuery={short_name:"zanjs-com"};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.id="duoshuo-script",t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}();</script><script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script><script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script><script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script><script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script><script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script><script type="text/javascript" src="/js/motion_global.js?v=0.4.5.2" id="motion.global"></script><script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.2"></script><script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript">$(document).ready(function(){isMobile()&&FastClick.attach(document.body),motionIntegrator.add(motionMiddleWares.logo).add(motionMiddleWares.menu).add(motionMiddleWares.backToTop).add(motionMiddleWares.postList).add(motionMiddleWares.sidebar),motionIntegrator.bootstrap()});</script><script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],processEscapes:!0,skipTags:["script","noscript","style","textarea","pre","code"]}});</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function(){var a,e=MathJax.Hub.getAllJax();for(a=0;a<e.length;a+=1)e[a].SourceElement().parentNode.className+=" has-jax"});</script><script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script><script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script><script type="text/javascript" src="/js/lazyload.js"></script><script type="text/javascript">$(function(){$("#posts").find("img").lazyload({placeholder:"/images/loading.gif",effect:"fadeIn"})});</script></body></html>