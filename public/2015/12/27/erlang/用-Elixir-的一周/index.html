<!doctype html> <html class="theme-next use-motion"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"> <meta http-equiv="Cache-Control" content="no-transform"> <meta http-equiv="Cache-Control" content="no-siteapp"> <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"> <link href="//fonts.lug.ustc.edu.cn/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"> <link rel="stylesheet" type="text/css" href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0"> <link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.2"> <meta name="description" content="一米阳光下，一本书，一个人，思念昉~"> <meta name="keywords" content="Elixir,erlang,"> <link rel="alternate" href="/atom.xml" title="一点心怡 | 前端娃" type="application/atom+xml"> <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2"> <meta name="description" content="大约一周前我开始学习Elixir. 关于这个我也只是有些模糊的印象但还没有仔细去看。 但在Dave Thomas 出版了 Programming Elixir之后一切都发生了改变. Dave Thomas 帮我修订过Erlang这本书并且是Ruby的倡导者, 只要Dave对什么产生了兴趣那绝不是空穴来风.  Dave 对Elixir很感兴趣, 在他的书里这样写道: 1234567891011121"> <meta property="og:type" content="article"> <meta property="og:title" content="用 Elixir 的一周"> <meta property="og:url" content="http://zanjs.com/2015/12/27/erlang/用-Elixir-的一周/index.html"> <meta property="og:site_name" content="一点心怡 | 前端娃"> <meta property="og:description" content="大约一周前我开始学习Elixir. 关于这个我也只是有些模糊的印象但还没有仔细去看。 但在Dave Thomas 出版了 Programming Elixir之后一切都发生了改变. Dave Thomas 帮我修订过Erlang这本书并且是Ruby的倡导者, 只要Dave对什么产生了兴趣那绝不是空穴来风.  Dave 对Elixir很感兴趣, 在他的书里这样写道: 1234567891011121"> <meta property="og:updated_time" content="2016-01-31T03:46:03.000Z"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="用 Elixir 的一周"> <meta name="twitter:description" content="大约一周前我开始学习Elixir. 关于这个我也只是有些模糊的印象但还没有仔细去看。 但在Dave Thomas 出版了 Programming Elixir之后一切都发生了改变. Dave Thomas 帮我修订过Erlang这本书并且是Ruby的倡导者, 只要Dave对什么产生了兴趣那绝不是空穴来风.  Dave 对Elixir很感兴趣, 在他的书里这样写道: 1234567891011121"> <script type="text/javascript" id="hexo.configuration">var CONFIG={scheme:"",sidebar:"post"};</script><title> 用 Elixir 的一周 | 一点心怡 | 前端娃 </title> </head> <body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"> <!--[if lte IE 8]><div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div><![endif]--> <script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?f8dd2acc75c13f358fd7f6266a371012";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script><div class="container one-column page-post-detail"> <div class="headband"></div> <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"> <div class="header-inner"><div class="site-meta"> <div class="custom-logo-site-title"> <a href="/" class="brand" rel="start"> <span class="logo-line-before"><i></i></span>
<span class="site-title">一点心怡 | 前端娃</span>
<span class="logo-line-after"><i></i></span> </a> </div> <p class="site-subtitle">精于心, 简于形, 说前端, 一种新的写作方式</p> </div> <div class="site-nav-toggle"> <button> <span class="btn-bar"></span>
<span class="btn-bar"></span>
<span class="btn-bar"></span> </button> </div> <nav class="site-nav"> <ul id="menu" class="menu menu-left"> <li class="menu-item menu-item-home"> <a href="/" rel="section"> <i class="menu-item-icon fa fa-home fa-fw"></i> <br> 首页 </a> </li> <li class="menu-item menu-item-categories"> <a href="/categories" rel="section"> <i class="menu-item-icon fa fa-th fa-fw"></i> <br> 分类 </a> </li> <li class="menu-item menu-item-about"> <a href="/about" rel="section"> <i class="menu-item-icon fa fa-user fa-fw"></i> <br> 关于 </a> </li> <li class="menu-item menu-item-archives"> <a href="/archives" rel="section"> <i class="menu-item-icon fa fa-archive fa-fw"></i> <br> 归档 </a> </li> <li class="menu-item menu-item-tags"> <a href="/tags" rel="section"> <i class="menu-item-icon fa fa-tags fa-fw"></i> <br> 标签 </a> </li> <li class="menu-item menu-item-commonweal"> <a href="/404.html" rel="section"> <i class="menu-item-icon fa fa-heartbeat fa-fw"></i> <br> 公益404 </a> </li> <li class="menu-item menu-item-search"> <a href="#" class="st-search-show-outputs"> <i class="menu-item-icon fa fa-search icon-next-search"></i> <br> 搜索 </a> </li> </ul> <div class="site-search"> <script type="text/javascript">!function(t,e,n,s,c,a,i){t.SwiftypeObject=c,t[c]=t[c]||function(){(t[c].q=t[c].q||[]).push(arguments)},a=e.createElement(n),i=e.getElementsByTagName(n)[0],a.async=1,a.src=s,i.parentNode.insertBefore(a,i)}(window,document,"script","//s.swiftypecdn.com/install/v2/st.js","_st"),_st("install","var-RLWgXExJzG-yZ-yP","2.0.0");</script></div></nav></div></header><main id="main" class="main"> <div class="main-inner"> <div id="content" class="content"> <div id="posts" class="posts-expand"> <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"> <header class="post-header"> <h1 class="post-title" itemprop="name headline"> 用 Elixir 的一周 </h1> <div class="post-meta"> <span class="post-time"> 发表于
<time itemprop="dateCreated" datetime="2015-12-27T16:38:08+08:00" content="2015-12-27"> 2015-12-27 </time> </span>
<span class="post-category"> &nbsp; | &nbsp; 分类于
<span itemprop="about" itemscope itemtype="https://schema.org/Thing"> <a href="/categories/Elixir/" itemprop="url" rel="index"> <span itemprop="name">Elixir</span> </a> </span> </span>
<span class="post-comments-count"> &nbsp; | &nbsp;
<a href="/2015/12/27/erlang/用-Elixir-的一周/#comments" itemprop="discussionUrl"> <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/27/erlang/用-Elixir-的一周/" itemprop="commentsCount"></span> </a> </span> </div> </header> <div class="post-body"> <span itemprop="articleBody"><p>大约一周前我开始学习Elixir. 关于这个我也只是有些模糊的印象但还没有仔细去看。</p> <p>但在Dave Thomas 出版了 <a href="https://pragprog.com/book/elixir/programming-elixir" target="_blank" rel="external">Programming Elixir</a>之后一切都发生了改变.<br> Dave Thomas 帮我修订过Erlang这本书并且是Ruby的倡导者, 只要Dave对什么产生了兴趣那绝不是空穴来风.</p> <p> Dave 对Elixir很感兴趣, 在他的书里这样写道:</p> <figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> I came across Ruby <span class="operator">in</span> <span class="number">1998</span> because I was <span class="operator">an</span> avid </span><br><span class="line">reader <span class="operator">of</span> comp.lang.misc (ask your parents). I </span><br><span class="line">downloaded <span class="keyword">it</span>, compiled <span class="keyword">it</span>, <span class="operator">and</span> fell <span class="operator">in</span> love. </span><br><span class="line">As <span class="operator">with</span> <span class="keyword">any</span> <span class="built_in">time</span> you fall <span class="operator">in</span> love,</span><br><span class="line"><span class="keyword">it</span>’s difficult <span class="built_in">to</span> explain why. </span><br><span class="line">It just worked <span class="operator">the</span> way I work, </span><br><span class="line"><span class="operator">and</span> <span class="keyword">it</span> had enough depth <span class="built_in">to</span> keep me interested.</span><br><span class="line"></span><br><span class="line">Fast forward <span class="number">15</span> years. All that <span class="built_in">time</span> I’d been </span><br><span class="line">looking <span class="keyword">for</span> something <span class="built_in">new</span> that gave me <span class="operator">the</span> same feeling.</span><br><span class="line"></span><br><span class="line">I came across Elixir <span class="operator">a</span> <span class="keyword">while</span> back, but <span class="keyword">for</span> some </span><br><span class="line">reason never got stuck <span class="operator">in</span>. But <span class="operator">a</span> few months ago I </span><br><span class="line">was chatting <span class="operator">with</span> Corey Haines. I was</span><br><span class="line">bemoaning <span class="operator">the</span> fact that I wanted <span class="built_in">to</span> find <span class="operator">a</span> </span><br><span class="line">way <span class="built_in">to</span> show people functional programming concepts </span><br><span class="line"><span class="keyword">without</span> <span class="operator">the</span> kind <span class="operator">of</span> academic trappings those books </span><br><span class="line">seem <span class="built_in">to</span> attract. He told me <span class="built_in">to</span> look again <span class="keyword">at</span> Elixir. I</span><br><span class="line">did, <span class="operator">and</span> I felt <span class="operator">the</span> same way I felt when I <span class="keyword">first</span> saw Ruby.</span><br></pre></td></tr></table></figure> <p> 我能体会.纯粹的感官体验. 就像我知道一件事是对的但还不知道原因，<br> 几周甚至几年后这个问题总能回答出来. Malcolm Gladwell在Blink:<br> The Power of Thinking Without Thinking一书中曾探讨过这个问题.<br> 某些领域专家们总能凭直觉判断事情的正确与否，但却给不出具体原因.</p> <p>但我发现Dave 的描述后，我很想知道为什么他会这样.</p> <p>无独有偶, Simon St. Laurent也出了本Elixir的书.<br>Simon的 Introducing Erlang… 一书表现不俗，我和他还通过邮件沟通过几次，还有有些熟悉的.<br>从Pragmatic Press 和O’Reilly 出版社都在争着出版Elixir可见一斑。关于Erlang VM, 我确实一窍不通。</p> <p>我给Dave和Simon 发了封邮件，之后他们借给我了样书，现在可以开始阅读了 … 谢了 …</p> <h3 id="上周我下载了elixir_开始学习…">上周我下载了elixir 开始学习…</h3><p>没多久我觉得就上手了. 确实好东西. 有趣的是Erlang和Elixir 实际上是同源的.<br>事实上也确实这样，他们都会被EVM (Erlang Virtual Machine)编译 -<br>大家管这个EVM 叫 “Beam” VM 但为了和JVM区别就管他叫EVM 吧.</p> <p>Erlang和Elixir为啥有相同的“语意”? 这得从底层谈起.<br>垃圾回收, 独立并发机制, 错误处理和代码装载机制都是一样的.<br> 还有: 他们都运行在相同的VM里. 这也是Scala 和 Akka区别于 Erlang的原因.<br>Scala和Akka是运行在JVM 上的, 垃圾回收和代码装载机制从本质上就不同.</p> <p>Elixir最明显的特点就是语法的表示，和Ruby很像. 简单易懂，还有很多外部资源。</p> <p>Erlang’s 的语法源自 Prolog 还受到smalltalk, CSP 和功能性编程语言的影响.<br> Elixir 受到Erlang 和Ruby的影响. 类型匹配, 功能优先级错误处理机制都是从Erlang来的.sigils,<br> 语法简写从Ruby 来。 当然也有自己的创新, |&gt; 管道操作, Prologs DCGs 和Haskell monads<br> (简化了一些类似于Unix的管道操作) 宏引用,是从lisp quasiquote得来，还有逗号操作符.</p> <p>Elixir更新了AST机制 , 和Erlang AST独有展示的模式不同,<br> Elixir AST 统一了模式这使得meta-programming 更简单.</p> <p> 实现起来也中规中矩，只是有几处需要注意. 字符串插入 (主意不错) ：</p> <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IO<span class="class">.puts</span> <span class="string">"...#&#123;x&#125;..."</span></span><br></pre></td></tr></table></figure> <p>获取x并按格式打印出来. 但只对简单模式的x起作用.</p> <p> 这可以通过从Elixir调用Erlang的方法来弥补</p> <p> IO.puts “…#{pp(x)}…” 就可以. 只是需要把 pp(x) 改成</p> <figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">pp</span></span>(x) <span class="keyword">do</span> </span><br><span class="line">    <span class="symbol">:io_lib</span>.format(<span class="string">"~p"</span>, [x])</span><br><span class="line">    |&gt; <span class="symbol">:lists</span>.flatten</span><br><span class="line">    |&gt; <span class="symbol">:erlang</span>.list_to_binary</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure> <p> Erlang 描述如下:</p> <figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">pp</span><span class="params">(<span class="variable">X</span>)</span> -&gt;</span></span><br><span class="line"> <span class="function_name">list_to_binary</span>(<span class="function_name">lists_flatten</span>(<span class="function_name">li_lib:format</span>(<span class="string">"~p),[X])))</span></span><br></pre></td></tr></table></figure> <p> 这和Elixir的描述一样. Elixir的写法也更容易阅读. |&gt; 操作符用来把io_lib:format 的结果输入到<br> lists:flatten 然后再到list_to_binary. 跟unix的管道符|一样</p> <p> Elixir区别与Erlang在 - 变量可复用.<br> 结果集始终可以表示为static-single-assignment (SSA) .<br> 但在循环结构里千万别这么做.好在 Elixir只用了递归而没有循环结构.<br> 如果循环结构里引用了可变的参数，那远端EVM就没法编译了.<br> 当在SSA顺序结构中使用变量时, EVM 就知道如何处理.循环结构Elixir就没办法了.<br> 其根源可追溯到LLVM汇编- 那就是另一个问题了.</p> <h2 id="编程语言设计的三定律">编程语言设计的三定律</h2><ul> <li><p>你做对的，无人为你提。</p> </li> <li><p>你做错的，有人跟你急。</p> </li> <li><p>难点必须不断重复解释。</p> </li> </ul> <p>有些语言在一些方面做得很好，它们正确，优雅，易于理解，但没人不辞麻烦地提及这些。</p> <p>错误的地方非常糟糕。你成了笨蛋，如果好处比重大于坏处，你可能被原谅。那些你想在以后消除的坏处，<br>却因为向后兼容性或者是有些傻子（或曰你的狂粉）已经用所有那些坏处写了无数行代码等原因，而不能动。</p> <p>难以理解的内容是真正倒霉的事情。你必须一遍又一遍地解释，直到你吐血，可还是有些人永远不懂，<br>你必须写上百邮件和数千文字来一遍又一遍地解释这些内容是什么意思以及它们为什么会如此。<br>对于一个语言的设计者或作者来说，这是一个痛苦的深渊。</p> <p>我将要提到的几件事就是我认为落入这三类情况中的。</p> <p>在我开始前，我要说 Elixir 做对了好多好多的事情，好处远远大于坏处。</p> <p>关于 Elixir 的好处是，及时改正它的坏处还不算晚。<br>这只能在无数代码行被写下和众多程序员开始使用它之前才能做到——所以只有少数时间来解决这些问题了。</p></span> </div> <footer class="post-footer"> <div class="post-tags"> <a href="/tags/Elixir/" rel="tag">#Elixir</a>
<a href="/tags/erlang/" rel="tag">#erlang</a> </div> <div class="post-nav"> <div class="post-nav-next post-nav-item"> <a href="/2015/12/12/nginx/MAC使用brew安装nginx-php-mysql环境/" rel="next" title="MAC使用brew安装nginx+php+mysql环境"> <i class="fa fa-chevron-left"></i> MAC使用brew安装nginx+php+mysql环境 </a> </div> <div class="post-nav-prev post-nav-item"> <a href="/2016/01/10/javascript/JavaScript-数组常用方法介绍/" rel="prev" title="JavaScript 数组常用方法介绍"> JavaScript 数组常用方法介绍 <i class="fa fa-chevron-right"></i> </a> </div> </div> </footer> </article> <div class="post-spread"> <div class="ds-share flat" data-thread-key="2015/12/27/erlang/用-Elixir-的一周/" data-title="用 Elixir 的一周" data-content="" data-url="http://zanjs.com/2015/12/27/erlang/用-Elixir-的一周/"> <div class="ds-share-inline"> <ul class="ds-share-icons-16"> <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li> <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li> <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li> <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li> <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li> </ul> <div class="ds-share-icons-more"> </div> </div> </div> </div> </div> </div> <div class="comments" id="comments"> <div class="ds-thread" data-thread-key="2015/12/27/erlang/用-Elixir-的一周/" data-title="用 Elixir 的一周" data-url="http://zanjs.com/2015/12/27/erlang/用-Elixir-的一周/"> </div> </div> </div> <div class="sidebar-toggle"> <div class="sidebar-toggle-line-wrap"> <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
<span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
<span class="sidebar-toggle-line sidebar-toggle-line-last"></span> </div> </div> <aside id="sidebar" class="sidebar"> <div class="sidebar-inner"> <ul class="sidebar-nav motion-element"> <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录 </li> <li class="sidebar-nav-overview" data-target="site-overview"> 站点概览 </li> </ul> <section class="site-overview sidebar-panel"> <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" src="https://avatars2.githubusercontent.com/u/12947276?v=3&s=460" alt="Julaud" itemprop="image"> <p class="site-author-name" itemprop="name">Julaud</p> </div> <p class="site-description motion-element" itemprop="description">一米阳光下，一本书，一个人，思念昉~</p> <nav class="site-state motion-element"> <div class="site-state-item site-state-posts"> <a href="/archives"> <span class="site-state-item-count">13</span>
<span class="site-state-item-name">日志</span> </a> </div> <div class="site-state-item site-state-categories"> <a href="/categories"> <span class="site-state-item-count">7</span>
<span class="site-state-item-name">分类</span> </a> </div> <div class="site-state-item site-state-tags"> <a href="/tags"> <span class="site-state-item-count">26</span>
<span class="site-state-item-name">标签</span> </a> </div> </nav> <div class="feed-link motion-element"> <a href="/atom.xml" rel="alternate"> <i class="menu-item-icon icon-next-feed"></i>
RSS </a> </div> <div class="links-of-author motion-element"> <span class="links-of-author-item"> <a href="https://github.com/zanjs" target="_blank"> <i class="fa fa-github fa-fw"></i> github </a> </span>
<span class="links-of-author-item"> <a href="https://twitter.com/zanjs" target="_blank"> <i class="fa fa-twitter fa-fw"></i> twitter </a> </span>
<span class="links-of-author-item"> <a href="http://weibo.com/5315557778" target="_blank"> <i class="fa fa-weibo fa-fw"></i> weibo </a> </span> </div> <div class="links-of-author motion-element"> </div> </section> <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"> <div class="post-toc-indicator-top post-toc-indicator"></div> <div class="post-toc"> <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#上周我下载了elixir_开始学习…"><span class="nav-number">1.</span> <span class="nav-text">上周我下载了elixir 开始学习…</span></a></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#编程语言设计的三定律"><span class="nav-number"></span> <span class="nav-text">编程语言设计的三定律</span></a></li></div> </div> <div class="post-toc-indicator-bottom post-toc-indicator"></div> </section> </div> </aside> </main> <footer id="footer" class="footer"> <div class="footer-inner"> <div class="copyright"> &copy; 2015 -
<span itemprop="copyrightYear">2016</span>
<span class="with-love"> <i class="icon-next-heart fa fa-heart"></i> </span>
<span class="author" itemprop="copyrightHolder">Julaud</span> </div> </div> </footer> <div class="back-to-top"></div> </div> <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script><script type="text/javascript">var duoshuoQuery={short_name:"zanjs-com"};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.id="duoshuo-script",t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}();</script><script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script><script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script><script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script><script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script><script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script><script type="text/javascript" src="/js/motion_global.js?v=0.4.5.2" id="motion.global"></script><script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.2"></script><script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.2" id="bootstrap.scrollspy.custom"></script><script type="text/javascript" id="sidebar.toc.highlight">$(document).ready(function(){function o(){$(s+" "+r).removeClass(r.substring(1))}function t(){i(),n()}function i(){var o=$(".sidebar").height()-a.position().top-$(".post-toc-indicator-bottom").height();return a.css("height",o),o}function n(){c(".post-toc-indicator-top",a.scrollTop()>0?"show":"hide"),c(".post-toc-indicator-bottom",a.scrollTop()>=a.find("ol").height()-a.height()?"hide":"show")}function e(o){o.on("mousewheel DOMMouseScroll",function(o){var t=o.originalEvent,i=t.wheelDelta||-t.detail;this.scrollTop+=30*(0>i?1:-1),o.preventDefault(),n()})}function c(o,t){var i=$(o),n="show"===t?.4:0;i.velocity?i.velocity("stop").velocity({opacity:n},{duration:100}):i.stop().animate({opacity:n},100)}var s=".post-toc",a=$(s),r=".active-current";a.on("activate.bs.scrollspy",function(){var t=$(s+" .active").last();o(),t.addClass("active-current"),a[0].scrollTop=t.position().top}).on("clear.bs.scrollspy",function(){o()}),$(document).on("sidebar.motion.complete",function(){t()}),$("body").scrollspy({target:s}),$(window).on("resize",function(){$(".sidebar").hasClass("sidebar-active")&&t()}),e(a)});</script><script type="text/javascript" id="sidebar.nav">$(document).ready(function(){var t=$("html"),i=200,a=$.isFunction(t.velocity);$(".sidebar-nav li").on("click",function(){var t=$(this),o="sidebar-nav-active",e="sidebar-panel-active";if(!t.hasClass(o)){var s=$("."+e),n=$("."+t.data("target"));a?s.velocity("transition.slideUpOut",i,function(){n.velocity("stop").velocity("transition.slideDownIn",i).addClass(e)}):s.animate({opacity:0},i,function(){s.hide(),n.stop().css({opacity:0,display:"block"}).animate({opacity:1},i,function(){s.removeClass(e),n.addClass(e)})}),t.siblings().removeClass(o),t.addClass(o)}}),$(".post-toc a").on("click",function(i){i.preventDefault();var o=escapeSelector(this.getAttribute("href")),e=$(o).offset().top;a?t.velocity("stop").velocity("scroll",{offset:e+"px",mobileHA:!1}):$("html, body").stop().animate({scrollTop:e},500)}),motionMiddleWares.sidebar=function(){var t=$(".post-toc-content");"post"===CONFIG.sidebar&&t.length>0&&t.html().trim().length>0&&displaySidebar()}});</script><script type="text/javascript">$(document).ready(function(){isMobile()&&FastClick.attach(document.body),motionIntegrator.add(motionMiddleWares.logo).add(motionMiddleWares.menu).add(motionMiddleWares.backToTop).add(motionMiddleWares.postList).add(motionMiddleWares.sidebar),motionIntegrator.bootstrap()});</script><script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],processEscapes:!0,skipTags:["script","noscript","style","textarea","pre","code"]}});</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function(){var a,e=MathJax.Hub.getAllJax();for(a=0;a<e.length;a+=1)e[a].SourceElement().parentNode.className+=" has-jax"});</script><script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script><script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script><script type="text/javascript" src="/js/lazyload.js"></script><script type="text/javascript">$(function(){$("#posts").find("img").lazyload({placeholder:"/images/loading.gif",effect:"fadeIn"})});</script></body></html>